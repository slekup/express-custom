{"version":3,"sources":["../src/index.ts","../src/utils/middleware/error.middleware.ts","../src/utils/logger.ts","../src/utils/validate.ts","../src/utils/middleware/wrapper.middleware.ts","../src/builders/Base/BaseAppBuilder.ts","../src/builders/StructureBuilder.ts","../src/builders/ApiBuilder.ts","../src/builders/Base/BaseValueBuilder.ts","../src/builders/Value/ArrayValueBuilder.ts","../src/builders/Value/BooleanValueBuilder.ts","../src/builders/Value/ImageValueBuilder.ts","../src/builders/Value/IntegerValueBuilder.ts","../src/builders/Value/NumberValueBuilder.ts","../src/builders/Value/ObjectValueBuilder.ts","../src/builders/Value/StringValueBuilder.ts","../src/builders/SchemaBuilder.ts","../src/builders/EndpointBuilder.ts","../src/builders/RouteBuilder.ts","../src/builders/RouterBuilder.ts","../src/builders/VersionBuilder.ts"],"sourcesContent":["import dotenv from 'dotenv';\nimport express from 'express';\n\ndotenv.config();\n\nexport * from './builders';\nexport { default as Config } from './typings/config';\n\nexport default express;\n","import colors from 'colors';\r\nimport { NextFunction, Request, Response } from 'express';\r\n\r\nimport { logger } from '..';\r\n\r\n/**\r\n * Middleware to handle 404 errors.\r\n * @param req The request object.\r\n * @param res The response object.\r\n * @param next The next function.\r\n */\r\nfunction notFound(req: Request, res: Response, next: NextFunction): void {\r\n  res.status(404).json({\r\n    status: 404,\r\n    message: 'The server cannot find the requested resource',\r\n  });\r\n  logger.error(\r\n    colors.red(`The route at ${req.originalUrl} was not found - ${req.method}`)\r\n  );\r\n  next();\r\n}\r\n\r\ninterface HttpError extends Error {\r\n  status: number;\r\n  field?: string;\r\n}\r\n\r\n/**\r\n * Middleware to handle errors.\r\n * @param err The error object.\r\n * @param req The request object.\r\n * @param res The response object.\r\n */\r\nfunction errorHandler(err: HttpError, req: Request, res: Response): void {\r\n  logger.error(err);\r\n\r\n  res.status(err.status || 500);\r\n\r\n  res.json({\r\n    error: {\r\n      status: err.status || 500,\r\n      message: 'Internal Server Error',\r\n      // stack: err.stack,\r\n      field: err.field,\r\n    },\r\n  });\r\n}\r\n\r\nexport default {\r\n  notFound,\r\n  errorHandler,\r\n};\r\n","import colors from 'colors';\nimport { TransformableInfo } from 'logform';\nimport * as winston from 'winston';\n\nconst debug = process.env.DEBUG ? true : false;\n\n/**\n * Returns a color based on the log level.\n * @param level The log level.\n * @returns The colored log level.\n */\nconst levelColor = (level: string): string => {\n  switch (level) {\n    case 'error': {\n      return colors.red(level.toUpperCase());\n    }\n    case 'warn': {\n      return colors.yellow(level.toUpperCase());\n    }\n    case 'info': {\n      return colors.green(level.toUpperCase());\n    }\n    case 'debug': {\n      return colors.blue(level.toUpperCase());\n    }\n    case 'trace': {\n      return colors.magenta(level.toUpperCase());\n    }\n    default: {\n      return colors.white(level.toUpperCase());\n    }\n  }\n};\n\n/**\n * The format for the console transport.\n */\nconst consoleFormat = winston.format.combine(\n  // winston.format.prettyPrint(),\n  winston.format.colorize(),\n  winston.format.timestamp(),\n  winston.format.ms(),\n  winston.format.errors({ stack: true }),\n  // winston.format.splat(),\n  // winston.format.json(),\n  winston.format.printf(\n    ({ timestamp, ms, level, message, stack }: TransformableInfo) => {\n      let msg = message as string;\n\n      // Append the stack trace to the message if it is present\n      if (stack) msg += `\\n${stack as string}`;\n\n      /* eslint-disable no-control-regex */\n      const ANSI_REGEX = /\\u001b\\[[0-9]{1,2}m/gi;\n\n      return `${colors.gray(timestamp as string)} (${colors.magenta(\n        ms as string\n      )}) [${levelColor(level.replace(ANSI_REGEX, ''))}]: ${msg}`;\n    }\n  )\n);\n\n/**\n * The logger instance - console transports only.\n */\nconst logger = winston.createLogger({\n  level: 'debug',\n  format: consoleFormat,\n  transports: [\n    // Console transport\n    new winston.transports.Console({\n      level: debug ? 'debug' : 'info',\n    }),\n    new winston.transports.Console({\n      level: 'error',\n    }),\n    new winston.transports.Console({\n      level: 'warn',\n    }),\n    new winston.transports.Console({\n      level: 'trace',\n    }),\n  ],\n});\n\nexport default logger;\n","/**\n * Validate a cron expression.\n * @param expression The cron expression to validate.\n * @returns Whether the cron expression is valid.\n */\nexport const validateCronExpression = (expression: string): boolean => {\n  const cronExpressionRegex =\n    /^(\\*|[0-9]{1,2}|\\*\\/[0-9]{1,2}) (\\*|[0-9]{1,2}|\\*\\/[0-9]{1,2}) (\\*|[0-9]{1,2}|\\*\\/[0-9]{1,2}) (\\*|[0-9]{1,2}|\\*\\/[0-9]{1,2}) (\\*|[0-9]{1,2}|\\*\\/[0-9]{1,2})$/;\n  return cronExpressionRegex.test(expression);\n};\n\n/**\n * Convert a time to cron time.\n * @param time The time to convert to cron time.\n * @returns The converted time.\n */\nexport const timeToCronExpression = (time: string): string | null => {\n  const timeRegex = /^([01]\\d|2[0-3]):([0-5]\\d)$/; // Regular expression to validate HH:MM format\n\n  // Check if the time matches the HH:MM format\n  if (timeRegex.test(time)) {\n    const [hours, minutes] = time.split(':'); // Split the time into hours and minutes\n\n    if (!hours || !minutes) return null; // Return null if the time is invalid\n\n    // Format hours and minutes for cron time\n    const cronHours = hours === '00' ? '0' : hours.replace(/^0+/, ''); // Remove leading zeros, except for '00'\n    const cronMinutes = minutes.replace(/^0+/, ''); // Remove leading zeros\n\n    return `${cronMinutes} ${cronHours} * * *`; // Return the cron time format\n  }\n\n  return null; // Return null if the time is invalid\n};\n\n/**\n * Validate a time.\n * @param time The time to validate.\n * @returns Whether the time is valid.\n */\nexport const validateTime = (time: string): boolean => {\n  const timeRegex = /^(?:[01]\\d|2[0-3]):(?:00|30)$/; // Regular expression to validate HH:MM format\n  return timeRegex.test(time);\n};\n\n/**\n * Tests if a string is empty.\n * @param str The string to test.\n * @returns True if the string is empty, false otherwise.\n */\nexport const validateEmail = (str: string): boolean => {\n  // /^\\S+@\\S+\\.\\S+$/\n  // /\\S+@\\S+\\.\\S+/\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(str);\n};\n\n/**\n * Tests if a username is valid.\n * @param str The username to test.\n * @returns True if the username is valid, false otherwise.\n */\nexport const validateUsername = (str: string): boolean => {\n  const usernameRegex = /^[a-zA-Z0-9_]{3,16}$/;\n  return usernameRegex.test(str);\n};\n\n/**\n * Tests if a password is valid.\n * @param str The password to test.\n * @returns True if the password is valid, false otherwise.\n */\nexport const valiedatePassword = (str: string): boolean => {\n  const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$/;\n  return passwordRegex.test(str);\n};\n\n/**\n * Tests if a phone number is valid.\n * @param str The phone number to test.\n * @returns True if the phone number is valid, false otherwise.\n */\nexport const validatePhoneNumber = (str: string): boolean => {\n  const phoneNumberRegex = /^\\d{10}$/;\n  return phoneNumberRegex.test(str);\n};\n\n/**\n * Tests if a ipv4 address is valid.\n * @param str The IPv4 address to test.\n * @returns True if the IPv4 address is valid, false otherwise.\n */\nexport const validateIpv4Address = (str: string): boolean => {\n  // ^((25[0-5]|(2[0-4]|1\\d|[1-9]|)\\d)\\.?\\b){4}$ - https://stackoverflow.com/questions/5284147/validating-ipv4-addresses-with-regexp\n  const ipv4AddressRegex =\n    /^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\\.|$)){4}$/;\n  return ipv4AddressRegex.test(str);\n};\n\n/**\n * Tests if a color is valid.\n * @param color The color string to test.\n * @returns True if the color is valid, false otherwise.\n */\nexport const validateColor = (color: string): boolean => {\n  // Remove any whitespace from the input\n  const cleanedColor = color.replace(/\\s/g, '');\n\n  // Check if the input matches a valid hex color pattern\n  if (/^#?[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/.test(cleanedColor)) {\n    // If it does, add a '#' if it's missing and return the cleanedColor\n    return cleanedColor.startsWith('#');\n  }\n\n  return false;\n};\n\n/**\n * Tests if a url is valid.\n * @param url The url to test.\n * @returns True if the url is valid, false otherwise.\n */\nexport const validateUrl = (url: string): boolean => {\n  // Check if the url is valid\n  try {\n    const urlObject = new URL(url);\n    return urlObject.href === url; // Additional check to handle relative URLs\n  } catch (err) {\n    return false;\n  }\n};\n\n/**\n * Tests if an image is valid.\n * @param image The image to test.\n * @returns True if the image is valid, false otherwise.\n */\nexport const validateImage = (image: string): boolean => {\n  // Check if the image is valid\n  try {\n    const imageObject = new URL(image);\n    return imageObject.href === image; // Additional check to handle relative URLs\n  } catch (err) {\n    return false;\n  }\n};\n","import { NextFunction, Request, Response } from 'express';\nimport { ClientSession, startSession } from 'mongoose';\n\nimport { logger } from '@utils/index';\n\ntype ControllerType = (\n  req: Request,\n  res: Response,\n  session: ClientSession\n) => Promise<unknown> | unknown;\n\n/**\n * Handles a function.\n * @param controller The handler function.\n * @param req The request.\n * @param res The response.\n * @param next The next function.\n */\nconst handledFunction = async (\n  controller: ControllerType,\n  req: Request,\n  res: Response,\n  next: NextFunction\n): Promise<void> => {\n  const session = await startSession();\n\n  try {\n    session.startTransaction();\n    await controller(req, res, session);\n    await session.commitTransaction();\n    next();\n  } catch (error) {\n    await session.abortTransaction();\n    logger.error(error);\n    res.status(500).json({ error: 'Internal Server Error' });\n  } finally {\n    session.endSession();\n  }\n};\n\n/**\n * Wraps a handler function in error handling.\n * @param controller The handler function.\n * @returns The handler function wrapped in error handling.\n */\nexport const withErrorHandling =\n  (controller: ControllerType) =>\n  (req: Request, res: Response, next: NextFunction): void => {\n    handledFunction(controller, req, res, next);\n  };\n","import express, { Express, Router } from 'express';\r\nimport { Options, rateLimit } from 'express-rate-limit';\r\n\r\nimport { Middleware, RateLimit } from '@typings/core';\r\n\r\n/**\r\n * Base app builder class.\r\n */\r\nexport default class BaseAppBuilder<T = 'router'> {\r\n  public raw:\r\n    | (T extends 'app' ? Express : never)\r\n    | (T extends 'router' ? Router : never);\r\n  protected ratelimit?: Partial<RateLimit>;\r\n  protected middlewares: Middleware[];\r\n\r\n  /**\r\n   * Creates an instance of the base app builder class.\r\n   * Router is the default type, so only pass 'app' to create an express app.\r\n   * @param type The type of the builder.\r\n   */\r\n  public constructor(type: T = 'router' as T) {\r\n    if (type === 'app') {\r\n      this.raw = express() as T extends 'app' ? Express : never;\r\n    } else {\r\n      this.raw = Router() as T extends 'router' ? Router : never;\r\n    }\r\n    this.middlewares = [];\r\n  }\r\n\r\n  /**\r\n   * Adds a router to the API.\r\n   * @param options The options of the rate limit.\r\n   * @param showInDocs Whether to show the rate limit in the docs.\r\n   * @returns The API builder.\r\n   */\r\n  public setRateLimit(options: Partial<Options>, showInDocs?: boolean): this {\r\n    if (this.ratelimit) throw new Error('Rate limit already set.');\r\n\r\n    // If showInDocs is undefined, it will default to true.\r\n    if (showInDocs || showInDocs === undefined)\r\n      this.ratelimit = {\r\n        statusCode: options.statusCode ?? 429,\r\n        ...(typeof options.windowMs === 'number'\r\n          ? { window: options.windowMs }\r\n          : {}),\r\n        ...(typeof options.max === 'number' ? { max: options.max } : {}),\r\n      };\r\n\r\n    // Use the express-rate-limit middleware.\r\n    this.raw.use(rateLimit(options));\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adds a middleware to the route. Add it before adding the route.\r\n   * @param middleware The middleware to add to the route.\r\n   * @returns The router builder.\r\n   */\r\n  public addMiddleware(middleware: Middleware): this {\r\n    this.middlewares.push(middleware);\r\n    this.raw.use(middleware);\r\n    return this;\r\n  }\r\n}\r\n","type StructureType = 'schema' | 'option';\r\n\r\ninterface StructureField {\r\n  name: string;\r\n  description: string;\r\n  type?: 'string' | 'number' | 'boolean' | 'object' | 'array';\r\n  required?: boolean;\r\n  structure?: string;\r\n  option?: string;\r\n}\r\n\r\nexport const structures: Record<string, unknown> = {};\r\n\r\n/**\r\n * The StructureBuilder class is used to build a example structures for object schemas and value options.\r\n */\r\nexport default class StructureBuilder {\r\n  private name: string;\r\n  private type: StructureType;\r\n  private fields: StructureField[];\r\n\r\n  /**\r\n   * The name of the structure.\r\n   * @param fields The fields of the structure.\r\n   * @param fields.name The name of the field.\r\n   * @param fields.type The type of the field.\r\n   * @param fields.fields The fields of the field.\r\n   */\r\n  public constructor({\r\n    name,\r\n    type,\r\n    fields,\r\n  }: {\r\n    name: string;\r\n    type: StructureType;\r\n    fields: StructureField[];\r\n  }) {\r\n    this.name = name;\r\n    this.type = type;\r\n    this.fields = fields;\r\n    structures[name] = this;\r\n  }\r\n\r\n  /**\r\n   * Exports the structure.\r\n   * @returns The exported structure.\r\n   */\r\n  public export(): {\r\n    name: string;\r\n    type: StructureType;\r\n    fields: StructureField[];\r\n  } {\r\n    return {\r\n      name: this.name,\r\n      type: this.type,\r\n      fields: this.fields,\r\n    };\r\n  }\r\n}\r\n","import { Server } from 'http';\r\n\r\nimport { RateLimit } from '@typings/core';\r\nimport { errorMiddleware } from '@utils/middleware';\r\nimport BaseAppBuilder from './Base/BaseAppBuilder';\r\nimport { structures } from './StructureBuilder';\r\nimport VersionBuilder, { ExportedVersion } from './VersionBuilder';\r\n\r\ninterface ExportedApi {\r\n  name: string;\r\n  description: string;\r\n  baseUrl: string;\r\n  port: number;\r\n  logo: string;\r\n  structures: Record<string, unknown>;\r\n  rateLimit?: Partial<RateLimit>;\r\n  versions: ExportedVersion[];\r\n}\r\n\r\n/**\r\n * The ApiBuilder class is used to build the API.\r\n */\r\nexport default class ApiBuilder extends BaseAppBuilder<'app'> {\r\n  private port: number;\r\n  private versions: VersionBuilder[];\r\n  private name: string;\r\n  private description: string;\r\n  private baseUrl: string;\r\n  private logo: string;\r\n\r\n  /**\r\n   * The constructor of the ApiBuilder class.\r\n   * @param config The configuration of the API.\r\n   * @param config.name The name of the API.\r\n   * @param config.description The description of the API.\r\n   * @param config.baseUrl The base URL of the API.\r\n   * @param config.port The port of the API.\r\n   * @param config.logo The logo of the API.\r\n   */\r\n  public constructor({\r\n    name,\r\n    description,\r\n    baseUrl,\r\n    port,\r\n    logo,\r\n  }: {\r\n    name: string;\r\n    description: string;\r\n    baseUrl: string;\r\n    port: number;\r\n    logo?: string;\r\n  }) {\r\n    super('app');\r\n    this.versions = [];\r\n    this.name = name;\r\n    this.description = description;\r\n    this.baseUrl = baseUrl;\r\n    this.port = port;\r\n    this.logo = logo ?? '';\r\n  }\r\n\r\n  /**\r\n   * Adds a version to the API.\r\n   * @param version The version to add.\r\n   * @returns The API builder.\r\n   */\r\n  public addVersion(version: VersionBuilder): this {\r\n    this.versions.push(version);\r\n    const versionValues = version.values();\r\n    this.raw.use(versionValues.path, versionValues.raw);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the name of the API.\r\n   * @param name The name of the API.\r\n   * @returns The API builder.\r\n   */\r\n  public setName(name: string): this {\r\n    this.name = name;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the description of the API.\r\n   * @param description The description for the API.\r\n   * @returns The API builder.\r\n   */\r\n  public setDescription(description: string): this {\r\n    this.description = description;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the base URL of the API.\r\n   * @param url The base URL of the API.\r\n   * @returns The API builder.\r\n   */\r\n  public setBaseUrl(url: string): this {\r\n    this.baseUrl = url;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the logo of the API.\r\n   * @param logo The logo of the API.\r\n   * @returns The API builder.\r\n   */\r\n  public setLogo(logo: string): this {\r\n    this.logo = logo;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Initializes the API.\r\n   * @param callback The callback to run when the API is initialized.\r\n   * @returns The server.\r\n   */\r\n  public startServer(callback?: () => void): Server {\r\n    this.raw.get('/', (req, res) =>\r\n      res.json({\r\n        message: 'Welcome to Slekup API',\r\n        versions: this.versions.map((version) => ({\r\n          version: `v${version.values().version}`,\r\n          url: `${this.baseUrl}/v${version.values().version}`,\r\n        })),\r\n      })\r\n    );\r\n\r\n    this.raw.use(errorMiddleware.notFound);\r\n    this.raw.use(errorMiddleware.errorHandler);\r\n\r\n    const server = this.raw.listen(this.port, callback);\r\n\r\n    return server;\r\n  }\r\n\r\n  /**\r\n   * Adds a router to the API.\r\n   * @returns The API data.\r\n   */\r\n  public export(): Readonly<ExportedApi> {\r\n    if (!this.name) throw new Error('The name of the API is not set.');\r\n    if (!this.description)\r\n      throw new Error('The description of the API is not set.');\r\n    if (!this.baseUrl) throw new Error('The base URL of the API is not set.');\r\n    if (!this.port) throw new Error('The port of the API is not set.');\r\n\r\n    return {\r\n      name: this.name,\r\n      description: this.description,\r\n      baseUrl: this.baseUrl,\r\n      port: this.port,\r\n      logo: this.logo,\r\n      structures,\r\n      rateLimit: this.ratelimit,\r\n      versions: this.versions.map((version) => version.export()),\r\n    };\r\n  }\r\n}\r\n","import { BaseValueSchema, ValueCheck } from '@typings/schema';\r\n\r\nexport interface ExportedValue<T> {\r\n  type: string;\r\n  min?: number;\r\n  max?: number;\r\n  options?: string[];\r\n  test?: string;\r\n  items?: T;\r\n  properties?: T;\r\n}\r\n\r\n/**\r\n * The base value builder class.\r\n * This class is not used for any value types, but is used to provide a base for all value builders.\r\n */\r\nexport default class BaseValueBuilder implements BaseValueSchema {\r\n  public name: string;\r\n  public description: string;\r\n  public required: boolean;\r\n  public checks: ValueCheck[];\r\n  public structure?: string;\r\n\r\n  /**\r\n   * Sets the name of the value.\r\n   */\r\n  public constructor() {\r\n    this.name = 'Name not provided';\r\n    this.description = 'Description not provided';\r\n    this.required = true; // Default to true\r\n    this.checks = [];\r\n  }\r\n\r\n  /**\r\n   * Sets the name of the value.\r\n   * @param name The name of the value.\r\n   * @returns The base value builder.\r\n   */\r\n  public setName(name: string): this {\r\n    this.name = name;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the description of the value.\r\n   * @param description The description of the value.\r\n   * @returns The base value builder.\r\n   */\r\n  public setDescription(description: string): this {\r\n    this.description = description;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets whether the value is required.\r\n   * @param required Whether the value is required.\r\n   * @returns The base value builder.\r\n   */\r\n  public setRequired(required: boolean): this {\r\n    this.required = required;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Add a custom function that returns a boolean to test the value against.\r\n   * @param check The checks of the value.\r\n   * @returns The base value builder.\r\n   */\r\n  public addCheck(check: ValueCheck): this {\r\n    this.checks.push(check);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the structure of the value.\r\n   * @param structure The structure of the value.\r\n   * @returns The base value builder.\r\n   */\r\n  public setStructure(structure: string): this {\r\n    this.structure = structure;\r\n    return this;\r\n  }\r\n}\r\n","import BaseValueBuilder from '@builders/Base/BaseValueBuilder';\r\nimport {\r\n  ArrayContains,\r\n  ArrayValue,\r\n  ValueSchema,\r\n  ValueTypes,\r\n} from '@typings/schema';\r\n\r\n/**\r\n * The array value builder class.\r\n */\r\nexport default class ArrayValueBuilder\r\n  extends BaseValueBuilder\r\n  implements ArrayValue<ValueSchema>\r\n{\r\n  public type = 'array' as const;\r\n  public min?: number;\r\n  public max?: number;\r\n  public unique?: boolean;\r\n  public contains?: ArrayContains;\r\n  public items?: ValueSchema | ValueSchema[];\r\n\r\n  /**\r\n   * Creates an instance of the array value builder class.\r\n   */\r\n  public constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * Sets the min of the value.\r\n   * @param min The min of the value.\r\n   * @returns The string value builder.\r\n   */\r\n  public setMin(min: number): this {\r\n    this.min = min;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the max of the value.\r\n   * @param max The max of the value.\r\n   * @returns The string value builder.\r\n   */\r\n  public setMax(max: number): this {\r\n    this.max = max;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets whether the value is unique.\r\n   * @param unique Whether the value is unique.\r\n   * @returns The string value builder.\r\n   */\r\n  public setUnique(unique: boolean): this {\r\n    this.unique = unique;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Set only one type that the array needs to contain.\r\n   * @param contains The type that the array needs to contain.\r\n   * @param min The minimum amount of times the type needs to be in the array.\r\n   * @param max The maximum amount of times the type needs to be in the array.\r\n   * @returns The string value builder.\r\n   */\r\n  public setContains(contains: ValueTypes, min?: number, max?: number): this {\r\n    this.contains = {\r\n      type: contains,\r\n      ...(min ? { min } : {}),\r\n      ...(max ? { max } : {}),\r\n    };\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the items that the array needs to contain.\r\n   * @param items The items that the array needs to contain.\r\n   * @returns The string value builder.\r\n   */\r\n  public setItems(items: ValueSchema | ValueSchema[]): this {\r\n    this.items = items;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Exports the array value.\r\n   * @returns The array value.\r\n   */\r\n  public export(): unknown {\r\n    return {\r\n      type: this.type,\r\n      name: this.name,\r\n      description: this.description,\r\n      required: this.required,\r\n      structure: this.structure,\r\n      max: this.max,\r\n      min: this.min,\r\n      unique: this.unique,\r\n    };\r\n  }\r\n}\r\n","import BaseValueBuilder from '@builders/Base/BaseValueBuilder';\r\nimport { BooleanValue } from '@typings/schema';\r\n\r\n/**\r\n * The boolean value builder class.\r\n */\r\nexport default class BooleanValueBuilder\r\n  extends BaseValueBuilder\r\n  implements BooleanValue\r\n{\r\n  public type = 'boolean' as const;\r\n\r\n  /**\r\n   * Creates an instance of the boolean value builder class.\r\n   */\r\n  public constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * Exports the value.\r\n   * @returns The exported value.\r\n   */\r\n  public export(): unknown {\r\n    return {\r\n      type: this.type,\r\n      name: this.name,\r\n      description: this.description,\r\n      required: this.required,\r\n      structure: this.structure,\r\n    };\r\n  }\r\n}\r\n","import BaseValueBuilder from '@builders/Base/BaseValueBuilder';\r\nimport { ImageValue } from '@typings/schema';\r\n\r\n/**\r\n * The image value builder class.\r\n */\r\nexport default class ImageValueBuilder\r\n  extends BaseValueBuilder\r\n  implements ImageValue\r\n{\r\n  public type = 'image' as const;\r\n\r\n  /**\r\n   * Creates an instance of the image value builder class.\r\n   */\r\n  public constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * Exports the value.\r\n   * @returns The exported value.\r\n   */\r\n  public export(): unknown {\r\n    return {\r\n      type: this.type,\r\n      name: this.name,\r\n      description: this.description,\r\n      required: this.required,\r\n      structure: this.structure,\r\n    };\r\n  }\r\n}\r\n","import BaseValueBuilder from '@builders/Base/BaseValueBuilder';\r\nimport { IntegerValue } from '@typings/schema';\r\n\r\n/**\r\n * The integer value builder class.\r\n */\r\nexport default class IntegerValueBuilder\r\n  extends BaseValueBuilder\r\n  implements IntegerValue\r\n{\r\n  public type = 'integer' as const;\r\n  public min?: number;\r\n  public max?: number;\r\n\r\n  /**\r\n   * Creates an instance of the integer value builder class.\r\n   */\r\n  public constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * Sets the minimun value the integer can be.\r\n   * @param min The min of the value.\r\n   * @returns The integer value builder.\r\n   */\r\n  public setMin(min: number): this {\r\n    this.min = min;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the maximum value the integer can be.\r\n   * @param max The max of the value.\r\n   * @returns The integer value builder.\r\n   */\r\n  public setMax(max: number): this {\r\n    this.max = max;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Exports the value.\r\n   * @returns The exported value.\r\n   */\r\n  public export(): unknown {\r\n    return {\r\n      type: this.type,\r\n      name: this.name,\r\n      description: this.description,\r\n      required: this.required,\r\n      structure: this.structure,\r\n    };\r\n  }\r\n}\r\n","import BaseValueBuilder from '@builders/Base/BaseValueBuilder';\r\nimport { NumberValue } from '@typings/schema';\r\n\r\n/**\r\n * The number value builder class.\r\n */\r\nexport default class NumberValueBuilder\r\n  extends BaseValueBuilder\r\n  implements NumberValue\r\n{\r\n  public type = 'number' as const;\r\n  public min?: number;\r\n  public max?: number;\r\n\r\n  /**\r\n   * Creates an instance of the number value builder class.\r\n   */\r\n  public constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * Sets the minimum value the number can be.\r\n   * @param min The min of the value.\r\n   * @returns The number value builder.\r\n   */\r\n  public setMin(min: number): this {\r\n    this.min = min;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the maximum value the number can be.\r\n   * @param max The max of the value.\r\n   * @returns The number value builder.\r\n   */\r\n  public setMax(max: number): this {\r\n    this.max = max;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Exports the value.\r\n   * @returns The exported value.\r\n   */\r\n  public export(): unknown {\r\n    return {\r\n      type: this.type,\r\n      name: this.name,\r\n      description: this.description,\r\n      required: this.required,\r\n      structure: this.structure,\r\n    };\r\n  }\r\n}\r\n","import BaseValueBuilder from '@builders/Base/BaseValueBuilder';\r\nimport { ObjectValue, Schema } from '@typings/schema';\r\n\r\n/**\r\n * The object value builder class.\r\n */\r\nexport default class ObjectValueBuilder<T>\r\n  extends BaseValueBuilder\r\n  implements ObjectValue<T>\r\n{\r\n  public type = 'object' as const;\r\n  public properties: Schema;\r\n\r\n  /**\r\n   * Creates an instance of the object value builder class.\r\n   */\r\n  public constructor() {\r\n    super();\r\n    this.properties = {};\r\n  }\r\n\r\n  /**\r\n   * Sets the properties of the value.\r\n   * @param properties The properties of the value.\r\n   * @returns The value builder.\r\n   */\r\n  public setProperties(properties: Schema): this {\r\n    this.properties = properties;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Exports the value.\r\n   * @returns The exported value.\r\n   */\r\n  public export(): unknown {\r\n    return {\r\n      type: this.type,\r\n      name: this.name,\r\n      description: this.description,\r\n      required: this.required,\r\n      structure: this.structure,\r\n    };\r\n  }\r\n}\r\n","import BaseValueBuilder from '@builders/Base/BaseValueBuilder';\r\nimport { StringTest, StringValue } from '@typings/schema';\r\n\r\n/**\r\n * The string value builder class.\r\n */\r\nexport default class StringValueBuilder\r\n  extends BaseValueBuilder\r\n  implements StringValue\r\n{\r\n  public type = 'string' as const;\r\n  public min?: number;\r\n  public max?: number;\r\n  public options?: string[];\r\n  public test?: StringTest;\r\n\r\n  /**\r\n   * Creates an instance of the string value builder class.\r\n   */\r\n  public constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * Sets the min of the value.\r\n   * @param min The min of the value.\r\n   * @returns The string value builder.\r\n   */\r\n  public setMin(min: number): Omit<this, 'setMin'> {\r\n    this.min = min;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the max of the value.\r\n   * @param max The max of the value.\r\n   * @returns The string value builder.\r\n   */\r\n  public setMax(max: number): this {\r\n    this.max = max;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Set an array of string values which the value must be one of.\r\n   * @param options An array of string options.\r\n   * @returns The string value builder.\r\n   */\r\n  public setOptions(options: string[]): this {\r\n    this.options = options;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the test regex for the string to be tested against.\r\n   * @param test The test of the value.\r\n   * @returns The string value builder.\r\n   */\r\n  public setTest(test: StringTest): this {\r\n    this.test = test;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Exports the value.\r\n   * @returns The exported value.\r\n   */\r\n  public export(): unknown {\r\n    return {\r\n      type: this.type,\r\n      name: this.name,\r\n      description: this.description,\r\n      required: this.required,\r\n      structure: this.structure,\r\n    };\r\n  }\r\n}\r\n","import { Response } from 'express';\n\nimport { Schema } from '@typings/schema';\nimport {\n  validateEmail,\n  validateImage,\n  validateIpv4Address,\n  validatePhoneNumber,\n  validateUrl,\n  validateUsername,\n  valiedatePassword,\n} from '@utils/validate';\nimport { ExportedValue } from './Base/BaseValueBuilder';\nimport {\n  ArrayValueBuilder,\n  BooleanValueBuilder,\n  ImageValueBuilder,\n  IntegerValueBuilder,\n  NumberValueBuilder,\n  ObjectValueBuilder,\n  StringValueBuilder,\n} from './Value';\n\nexport type ExportedSchema = Record<string, ExportedValue<ExportedSchema>>;\n\ntype ValueBuilders =\n  | ArrayValueBuilder\n  | StringValueBuilder\n  | NumberValueBuilder\n  | IntegerValueBuilder\n  | BooleanValueBuilder\n  | ObjectValueBuilder<ValueBuilders>\n  | ImageValueBuilder;\n\nexport type BuildersSchema = Record<string, ValueBuilders>;\n\n/**\n * The Schema Builder class.\n */\nexport default class SchemaBuilder {\n  public schema: BuildersSchema;\n\n  /**\n   * Creates a new schema.\n   */\n  public constructor() {\n    this.schema = {};\n  }\n\n  /**\n   * Adds a array value to the schema.\n   * @param callback The callback to build the array value.\n   * @returns The schema builder.\n   */\n  public addArray(callback: (value: ArrayValueBuilder) => void): this {\n    const value = new ArrayValueBuilder();\n    callback(value);\n    this.schema[value.name] = value;\n    return this;\n  }\n\n  /**\n   * Adds a string value to the schema.\n   * @param callback The callback to build the string value.\n   * @returns The schema builder.\n   */\n  public addString(callback: (value: StringValueBuilder) => void): this {\n    const value = new StringValueBuilder();\n    callback(value);\n    this.schema[value.name] = value;\n    return this;\n  }\n\n  /**\n   * Adds a number value to the schema.\n   * @param callback The callback to build the number value.\n   * @returns The schema builder.\n   */\n  public addNumber(callback: (value: NumberValueBuilder) => void): this {\n    const value = new NumberValueBuilder();\n    callback(value);\n    this.schema[value.name] = value;\n    return this;\n  }\n\n  /**\n   * Adds a integer value to the schema.\n   * @param callback The callback to build the integer value.\n   * @returns The schema builder.\n   */\n  public addInteger(callback: (value: IntegerValueBuilder) => void): this {\n    const value = new IntegerValueBuilder();\n    callback(value);\n    this.schema[value.name] = value;\n    return this;\n  }\n\n  /**\n   * Adds a boolean value to the schema.\n   * @param callback The callback to build the boolean value.\n   * @returns The schema builder.\n   */\n  public addBoolean(callback: (value: BooleanValueBuilder) => void): this {\n    const value = new BooleanValueBuilder();\n    callback(value);\n    this.schema[value.name] = value;\n    return this;\n  }\n\n  /**\n   * Adds a object value to the schema.\n   * @param callback The callback to build the object value.\n   * @returns The schema builder.\n   */\n  public addObject(\n    callback: (value: ObjectValueBuilder<ValueBuilders>) => void\n  ): this {\n    const value = new ObjectValueBuilder<ValueBuilders>();\n    callback(value);\n    this.schema[value.name] = value;\n    return this;\n  }\n\n  /**\n   * Adds a image value to the schema.\n   * @param callback The callback to build the image value.\n   * @returns The schema builder.\n   */\n  public addImage(callback: (value: ImageValueBuilder) => void): this {\n    const value = new ImageValueBuilder();\n    callback(value);\n    this.schema[value.name] = value;\n    return this;\n  }\n\n  /**\n   * Validate an object against a schema.\n   * @param data The object data to validate.\n   * @param schema The schema to validate against.\n   * @param properties Whether to validate the schema properties or not.\n   * @returns A string if the validation fails, false otherwise.\n   */\n  private async validateBase<T = 'schema'>(\n    data: Record<string, unknown>,\n    schema:\n      | (T extends 'schema' ? BuildersSchema : never)\n      | (T extends 'properties' ? Schema : never),\n    properties?: boolean\n  ): Promise<string | boolean> {\n    // Check if the data is an object\n    if (typeof data !== 'object') return 'The data provided must be an object.';\n\n    const schemaFields = properties\n      ? Object.entries(schema as Schema)\n      : Object.entries(schema as BuildersSchema);\n\n    // Check if all required fields have been provided\n    for (const [key, value] of schemaFields) {\n      if (value.required && !data[key])\n        return `The field \"${key}\" has not been provided.`;\n    }\n\n    // Check if all provided fields are the correct type\n    for (const [key, value] of schemaFields) {\n      if (typeof data[key] !== value.type)\n        return `The field \"${key}\" must be of type ${value.type}.`;\n    }\n\n    // Check if all provided fields are valid\n    for (const [key, value] of schemaFields) {\n      // Number validation\n      if (value.type === 'number') {\n        // If both min and max are provided, check if the schema value is within the range\n        if (\n          value.min &&\n          value.max &&\n          typeof data[key] === 'number' &&\n          ((data[key] as number) < value.min ||\n            (data[key] as number) > value.max)\n        )\n          return `The field \"${key}\" must be between ${value.min} and ${value.max}.`;\n\n        // Check if the schema value is above the minimum required value\n        if (\n          value.min &&\n          typeof data[key] === 'number' &&\n          (data[key] as number) < value.min\n        )\n          return `The field \"${key}\" must be at least ${value.min}.`;\n\n        // Check if the schema value is below the maximum required value\n        if (\n          value.max &&\n          typeof data[key] === 'number' &&\n          (data[key] as number) > value.max\n        )\n          return `The field \"${key}\" must be less than ${value.max}.`;\n      }\n\n      // Integer validation\n      if (value.type === 'integer') {\n        // If both min and max are provided, check if the schema value is within the range\n        if (\n          value.min &&\n          value.max &&\n          typeof data[key] === 'number' &&\n          ((data[key] as number) < value.min ||\n            (data[key] as number) > value.max)\n        )\n          return `The field \"${key}\" must be between ${value.min} and ${value.max}.`;\n\n        // Check if the schema value is above the minimum required value\n        if (\n          value.min &&\n          typeof data[key] === 'number' &&\n          (data[key] as number) < value.min\n        )\n          return `The field \"${key}\" must be at least ${value.min}.`;\n\n        // Check if the schema value is below the maximum required value\n        if (\n          value.max &&\n          typeof data[key] === 'number' &&\n          (data[key] as number) > value.max\n        )\n          return `The field \"${key}\" must be less than ${value.max}.`;\n\n        // Check if the schema value is an integer\n        if (\n          typeof data[key] !== 'number' ||\n          !Number.isInteger(data[key] as number)\n        )\n          return `The field \"${key}\" must be an integer.`;\n      }\n\n      // String validation\n      if (value.type === 'string') {\n        const req = value;\n        const testVal = data[key] as string;\n\n        // Check if the schema value is included in the schema options\n        if (value.options && !value.options.includes(data[key] as string))\n          return `The field \"${key}\" is not a valid option.`;\n\n        // If both min and max are provided, check if the schema value is within the range\n        if (\n          value.min &&\n          value.max &&\n          (testVal.length < value.min || testVal.length > value.max)\n        )\n          return `The field \"${key}\" must be between ${value.min} and ${value.max} characters.`;\n\n        // Check if the schema value has the minimum required length\n        if (value.min && testVal.length < value.min)\n          return `The field \"${key}\" must be at least ${value.min} characters.`;\n\n        // Check if the schema value has the maximum required length\n        if (value.max && testVal.length > value.max)\n          return `The field \"${key}\" must be less than ${value.max} characters.`;\n\n        // Test if email is valid\n        if (req.test === 'email' && !validateEmail(testVal))\n          return `The field \"${key}\" must be a valid email address.`;\n\n        // Test if username is valid\n        if (req.test === 'username' && !validateUsername(testVal))\n          return `The field \"${key}\" must be a valid username.`;\n\n        // Test if password is valid\n        if (req.test === 'passwordStrength' && !valiedatePassword(testVal))\n          return `The field \"${key}\" is too weak to be a valid password.`;\n\n        // Test if phone number is valid\n        if (req.test === 'phoneNumber' && !validatePhoneNumber(testVal))\n          return `The field \"${key}\" must be a valid phone number.`;\n\n        // Test if IPv4 address is valid\n        if (req.test === 'ipAddress' && !validateIpv4Address(testVal))\n          return `The field \"${key}\" must be a valid IPv4 address.`;\n\n        // Test if a url is valid\n        if (req.test === 'url' && !validateUrl(testVal))\n          return `The field \"${key}\" must be a valid IPv4 address.`;\n\n        // Test if the schema value is a string\n        if (typeof data[key] !== 'string')\n          return `The field \"${key}\" must be a string.`;\n      }\n\n      // Check if the schema value passes all checks\n      if (value.checks)\n        for (const check of value.checks) {\n          const passedCheck = await check.run(key);\n          if (!passedCheck) return `${check.response}.`;\n        }\n\n      // Boolean validation\n      if (value.type === 'boolean') {\n        // TODO: Check this works\n        // Check if the schema value is a boolean\n        if (typeof data[key] !== 'boolean')\n          return `The field \"${key}\" must be a boolean.`;\n      }\n\n      // Object validation\n      if (value.type === 'object') {\n        // TODO: Check this works\n        // Check if the schema value is an object\n        if (typeof data[key] !== 'object')\n          return `The field \"${key}\" must be an object.`;\n\n        // Check if the schema value has the correct properties\n        if (value.properties && Object.keys(value.properties).length > 0) {\n          const result = await this.validateBase<'properties'>(\n            data[key] as Record<string, unknown>,\n            value.properties as Schema,\n            true\n          );\n          if (result) return result;\n        }\n      }\n\n      // Array validation\n      if (value.type === 'array') {\n        // TODO: Check this works\n        // Check if the schema value is an array\n        if (!Array.isArray(data[key]))\n          return `The field \"${key}\" must be an array.`;\n\n        // TODO: Check if the schema value has the correct items\n        /* if (value.items) {\n          for (const item of data[key] as unknown[]) {\n            if (typeof item !== value.items.type)\n              return `The field \"${key}\" must be an array of ${value.items.type}.`;\n            if (!value.items.options.includes(item))\n              return `The field \"${key}\" must be an array of valid options.`;\n          }\n        } */\n      }\n\n      // Image validation\n      if (value.type === 'image') {\n        // TODO: Check this works\n        // Check if the schema value is a string\n        if (typeof data[key] !== 'string')\n          return `The field \"${key}\" must be a string.`;\n\n        // Check if the schema value is a valid image\n        if (!validateImage(data[key] as string))\n          return `The field \"${key}\" must be a valid image.`;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Run the validation function, and if the response object is provided, send a response if the validation fails.\n   * @param data The object data to validate.\n   * @param res The response object.\n   * @returns A JSON response meaning it's invalid, or null if it's valid.\n   */\n  public async validate(\n    data: Record<string, unknown>,\n    res: Response\n  ): Promise<Response | null> {\n    const result = await this.validateBase(data, this.schema);\n    if (result) return res.status(400).json({ status: 400, message: result });\n    return null;\n  }\n\n  /**\n   * Export the schema.\n   * @returns The exported schema.\n   */\n  public export(): ExportedSchema {\n    const exportSchema: Record<string, ExportedValue<ExportedSchema>> = {};\n\n    Object.entries(this.schema).forEach(([key, value]) => {\n      const exportedValue = value.export() as ExportedValue<ExportedSchema>;\n      exportSchema[key] = exportedValue;\n    });\n\n    return exportSchema;\n  }\n}\n","import { NextFunction, Request, Response } from 'express';\nimport { ClientSession } from 'mongoose';\n\nimport { PathString, RateLimit } from '@typings/core';\nimport { logger } from '@utils/index';\nimport { withErrorHandling } from '@utils/middleware';\nimport SchemaBuilder, { ExportedSchema } from './SchemaBuilder';\n\ntype RequestMethod =\n  | 'GET'\n  | 'POST'\n  | 'PATCH'\n  | 'PUT'\n  | 'DELETE'\n  | 'OPTIONS'\n  | 'HEAD'\n  | 'TRACE'\n  | 'CONNECT';\n\ntype EndpointMessageType = 'INFO' | 'WARNING' | 'DANGER' | 'SUCCESS';\n\ninterface EndpointNote {\n  type: EndpointMessageType;\n  text: string;\n}\n\ntype StatusCode =\n  | 200\n  | 201\n  | 204\n  | 301\n  | 400\n  | 401\n  | 403\n  | 404\n  | 405\n  | 409\n  | 500\n  | 501;\n\ninterface EndpointResponse {\n  status: StatusCode;\n  message: string;\n  [key: string]: unknown;\n}\n\nexport interface ExportedEndpoint {\n  name: string;\n  description: string;\n  path: string;\n  method: RequestMethod;\n  notes: EndpointNote[];\n  params: ExportedSchema;\n  queries: ExportedSchema;\n  body: ExportedSchema;\n  responses: EndpointResponse[];\n}\n\n/**\n * The endpoint builder class.\n */\nexport default class EndpointBuilder {\n  public disabled: boolean;\n  public name: string;\n  public description: string;\n  public path: PathString;\n  public method: RequestMethod;\n  public notes: EndpointNote[];\n  public paramSchema?: SchemaBuilder;\n  public querySchema?: SchemaBuilder;\n  public bodySchema?: SchemaBuilder;\n  public responses: EndpointResponse[];\n  public controller: (req: Request, res: Response, next: NextFunction) => void;\n  public ratelimit?: Partial<RateLimit>;\n\n  /**\n   * Creates a new endpoint.\n   */\n  public constructor() {\n    this.disabled = false;\n    this.name = 'Name not provided';\n    this.description = 'Description not provided';\n    this.path = '/';\n    this.method = 'GET';\n    this.notes = [];\n\n    this.responses = [];\n\n    /**\n     * If the controller is not set, throw an error.\n     */\n    this.controller = () => {\n      throw new Error('Controller not set');\n    };\n  }\n\n  /**\n   * Sets the disabled state of the endpoint.\n   * @param disabled The disabled state of the endpoint.\n   * @returns The endpoint builder.\n   */\n  public setDisabled(disabled: boolean): this {\n    this.disabled = disabled;\n    return this;\n  }\n\n  /**\n   * Sets the name of the endpoint.\n   * @param name The name of the endpoint.\n   * @returns The endpoint builder.\n   */\n  public setName(name: string): this {\n    this.name = name;\n    return this;\n  }\n\n  /**\n   * Sets the description of the endpoint.\n   * @param description The description of the endpoint.\n   * @returns The endpoint builder.\n   */\n  public setDescription(description: string): this {\n    this.description = description;\n    return this;\n  }\n\n  /**\n   * Sets the path of the endpoint.\n   * @param path The path of the endpoint.\n   * @returns The endpoint builder.\n   */\n  public setPath(path: PathString): this {\n    this.path = path;\n    return this;\n  }\n\n  /**\n   * Sets the method of the endpoint.\n   * @param method The method of the endpoint.\n   * @returns The endpoint builder.\n   */\n  public setMethod(method: RequestMethod): this {\n    this.method = method;\n    return this;\n  }\n\n  /**\n   * Sets the notes of the endpoint.\n   * @param notes The notes of the endpoint.\n   * @returns The endpoint builder.\n   */\n  public setNotes(notes: EndpointNote[]): this {\n    this.notes = notes;\n    return this;\n  }\n\n  /**\n   * Sets the schema to validate the provided request parameters against.\n   * @param callback The callback to build the schema.\n   * @returns The endpoint builder.\n   */\n  public setParamSchema(callback: (schema: SchemaBuilder) => void): this {\n    const schema = new SchemaBuilder();\n    callback(schema);\n    this.paramSchema = schema;\n    return this;\n  }\n\n  /**\n   * Sets the schema to validate the provided request queries against.\n   * @param callback The callback to build the schema.\n   * @returns The endpoint builder.\n   */\n  public setQuerySchema(callback: (schema: SchemaBuilder) => void): this {\n    const schema = new SchemaBuilder();\n    callback(schema);\n    this.querySchema = schema;\n    return this;\n  }\n\n  /**\n   * Sets the schema to validate the provided request body against.\n   * @param callback The callback to build the schema.\n   * @returns The endpoint builder.\n   */\n  public setBodySchema(callback: (schema: SchemaBuilder) => void): this {\n    const schema = new SchemaBuilder();\n    callback(schema);\n    this.bodySchema = schema;\n    return this;\n  }\n\n  /**\n   * Sets the responses of the endpoint.\n   * @param responses The responses of the endpoint.\n   * @returns The endpoint builder.\n   */\n  public setResponses(responses: EndpointResponse[]): this {\n    this.responses = responses;\n    return this;\n  }\n\n  /**\n   * Sets the controler to run.\n   * @param controller The controlller function to run.\n   * @returns The endpoint builder.\n   */\n  public setController(\n    controller: (\n      req: Request,\n      res: Response,\n      session: ClientSession\n    ) => Promise<unknown> | unknown\n  ): this {\n    this.controller = withErrorHandling(controller);\n    return this;\n  }\n\n  /**\n   * Executes the endpoint function.\n   * @param req The request.\n   * @param res The response.\n   * @param next The next function.\n   */\n  public execute(req: Request, res: Response, next: NextFunction): void {\n    (async () => {\n      try {\n        if (!this.paramSchema && !this.querySchema && !this.bodySchema)\n          return res\n            .status(500)\n            .json({ status: 500, message: 'Schema not set for endpoint.' });\n\n        // Validate the request\n        if (\n          this.paramSchema &&\n          (await this.paramSchema.validate(req.params, res))\n        )\n          return;\n        if (\n          this.querySchema &&\n          (await this.querySchema.validate(req.query, res))\n        )\n          return;\n        if (\n          this.bodySchema &&\n          (await this.bodySchema.validate(\n            req.body as Record<string, unknown>,\n            res\n          ))\n        )\n          return;\n\n        // Return the execution of the controller\n        return this.controller(req, res, next);\n      } catch (error) {\n        logger.error(error);\n      }\n    })();\n  }\n\n  /**\n   * Exports the endpoint.\n   * @returns The exported endpoint.\n   */\n  public export(): Readonly<ExportedEndpoint> {\n    return {\n      name: this.name,\n      description: this.description,\n      path: this.path === '/' ? '' : this.path,\n      method: this.method,\n      notes: this.notes,\n      params: this.paramSchema ? this.paramSchema.export() : {},\n      queries: this.querySchema ? this.querySchema.export() : {},\n      body: this.bodySchema ? this.bodySchema.export() : {},\n      responses: this.responses,\n    };\n  }\n}\n","import { Router } from 'express';\n\nimport { PathString } from '@typings/core';\nimport BaseAppBuilder from './Base/BaseAppBuilder';\nimport EndpointBuilder, { ExportedEndpoint } from './EndpointBuilder';\n\nexport interface ExportedRoute {\n  name: string;\n  description: string;\n  path: PathString;\n  endpoints: ExportedEndpoint[];\n}\n\n/**\n * The route builder class.\n */\nexport default class RouteBuilder extends BaseAppBuilder {\n  public raw: Router = Router();\n  private path: PathString;\n  private name: string;\n  private description: string;\n  private endpoints: EndpointBuilder[] = [];\n\n  /**\n   * Creates a new route.\n   * @param path The path of the route.\n   */\n  public constructor(path?: PathString) {\n    super();\n    this.path = path ?? '/';\n    this.name = 'Unnamed route';\n    this.description = 'No description provided.';\n  }\n\n  /**\n   * Sets the path of the route.\n   * @param name The name of the route.\n   * @returns The route builder.\n   */\n  public setName(name: string): this {\n    this.name = name;\n    return this;\n  }\n\n  /**\n   * Sets the description of the route.\n   * @param description The description of the route.\n   * @returns The route builder.\n   */\n  public setDescription(description: string): this {\n    this.description = description;\n    return this;\n  }\n\n  /**\n   * Sets the path of the route.\n   * @param path The path to set the router to.\n   * @returns The router builder.\n   */\n  public setPath(path: `/${string}`): this {\n    this.path = path;\n    return this;\n  }\n\n  /**\n   * Adds an endpoint to the route.\n   * @param endpoint The endpoint to add to the route.\n   * @returns The router builder.\n   */\n  public addEndpoint(endpoint: EndpointBuilder): this {\n    this.endpoints.push(endpoint);\n\n    // Replace multiple slashes with a single slash.\n    const doubleSlashRegex = /\\/+/g;\n\n    const url: string = `${this.path}${endpoint.path}`.replaceAll(\n      doubleSlashRegex,\n      '/'\n    );\n\n    switch (endpoint.method) {\n      case 'GET':\n        this.raw.get(url, endpoint.controller);\n        break;\n      case 'POST':\n        this.raw.post(url, endpoint.controller);\n        break;\n      case 'PUT':\n        this.raw.put(url, endpoint.controller);\n        break;\n      case 'PATCH':\n        this.raw.patch(url, endpoint.controller);\n        break;\n      case 'DELETE':\n        this.raw.delete(url, endpoint.controller);\n        break;\n      case 'OPTIONS':\n        this.raw.options(url, endpoint.controller);\n        break;\n      default:\n        throw new Error(`Invalid method ${String(endpoint.method)}`);\n    }\n\n    return this;\n  }\n\n  /**\n   * Adds all endpoints from an endpoint file to the route.\n   * @param endpointFile The endpoint file to add endpoints from.\n   * @returns The route builder.\n   */\n  public addEndpointFile(endpointFile: Record<string, EndpointBuilder>): this {\n    for (const value of Object.values(endpointFile)) {\n      this.addEndpoint(value);\n    }\n\n    return this;\n  }\n\n  /**\n   * Exports the route.\n   * @returns The exported route.\n   */\n  public export(): Readonly<ExportedRoute> {\n    return {\n      name: this.name,\n      description: this.description,\n      path: this.path,\n      endpoints: this.endpoints.map((endpoint) => endpoint.export()),\n    };\n  }\n}\n","import { Router } from 'express';\n\nimport { Middleware, PathString, RateLimit } from '@typings/core';\nimport BaseAppBuilder from './Base/BaseAppBuilder';\nimport RouteBuilder, { ExportedRoute } from './RouteBuilder';\n\nexport interface ExportedRouter {\n  name: string;\n  path: PathString;\n  routes: ExportedRoute[];\n}\n\n/**\n * The router builder class.\n */\nexport default class RouterBuilder extends BaseAppBuilder {\n  private path: PathString;\n  private name: string;\n  private routes: RouteBuilder[];\n\n  /**\n   * Creates a new router builder.\n   * @param params The router parameters.\n   * @param params.path The path of the router.\n   * @param params.name The name of the router.\n   */\n  public constructor({ path, name }: { path: PathString; name: string }) {\n    super();\n    this.path = path;\n    this.name = name;\n    this.routes = [];\n  }\n\n  /**\n   * Uses a router.\n   * @param route The router to use.\n   * @returns The router builder.\n   */\n  public addRoute(route: RouteBuilder): this {\n    this.routes.push(route);\n    this.raw.use(this.path, route.raw);\n    return this;\n  }\n\n  /**\n   * Exports the routes and endpoints data.\n   * @returns The exported data.\n   */\n  public export(): Readonly<ExportedRouter> {\n    return {\n      name: this.name,\n      path: this.path,\n      routes: this.routes.map((route) => route.export()),\n    };\n  }\n\n  /**\n   * Returns the router values.\n   * @returns The router values.\n   */\n  public values(): Readonly<{\n    raw: Router;\n    ratelimit?: Partial<RateLimit>;\n    path: `/${string}`;\n    defaultCategory: string;\n    routes: RouteBuilder[];\n    middlewares: Middleware[];\n  }> {\n    return {\n      raw: this.raw,\n      ratelimit: this.ratelimit,\n      path: this.path,\n      defaultCategory: this.name,\n      routes: this.routes,\n      middlewares: this.middlewares,\n    };\n  }\n}\n","import { Router } from 'express';\r\nimport rateLimit, { Options } from 'express-rate-limit';\r\n\r\nimport { RateLimit } from '@typings/core';\r\nimport BaseAppBuilder from './Base/BaseAppBuilder';\r\nimport RouterBuilder, { ExportedRouter } from './RouterBuilder';\r\n\r\nexport interface ExportedVersion {\r\n  version: number;\r\n  rateLimit?: Partial<RateLimit>;\r\n  routers: ExportedRouter[];\r\n}\r\n\r\n/**\r\n * The version builder class.\r\n */\r\nexport default class VersionBuilder extends BaseAppBuilder<'app'> {\r\n  private version: number;\r\n  private routers: RouterBuilder[];\r\n\r\n  /**\r\n   * Creates a new version builder.\r\n   * @param config The configuration of the API.\r\n   * @param config.version The version of the API.\r\n   */\r\n  public constructor({ version }: { version: number }) {\r\n    super('app');\r\n    this.routers = [];\r\n    this.version = version;\r\n  }\r\n\r\n  /**\r\n   * Adds a router to the API.\r\n   * @param options The options of the rate limit.\r\n   * @param showInDocs Whether to show the rate limit in the docs.\r\n   * @returns The API builder.\r\n   */\r\n  public setRateLimit(options: Partial<Options>, showInDocs?: boolean): this {\r\n    // If showInDocs is undefined, it will default to true.\r\n    if (showInDocs || showInDocs === undefined)\r\n      this.ratelimit = {\r\n        statusCode: options.statusCode ?? 429,\r\n        ...(typeof options.windowMs === 'number'\r\n          ? { window: options.windowMs }\r\n          : {}),\r\n        ...(typeof options.max === 'number' ? { max: options.max } : {}),\r\n      };\r\n\r\n    // Use the express-rate-limit middleware.\r\n    this.raw.use(`v${this.version}`, rateLimit(options));\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adds a router to the API.\r\n   * @param router The router to add.\r\n   * @returns The API builder.\r\n   */\r\n  public addRouter(router: RouterBuilder): this {\r\n    this.routers.push(router);\r\n    const routerValues = router.values();\r\n    this.raw.use(`v${this.version}`, routerValues.raw);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adds a router to the API.\r\n   * @returns The API data.\r\n   */\r\n  public export(): Readonly<ExportedVersion> {\r\n    return {\r\n      version: this.version,\r\n      rateLimit: this.ratelimit,\r\n      routers: this.routers.map((router) => router.export()),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Adds a router to the API.\r\n   * @returns The API data.\r\n   */\r\n  public values(): Readonly<{\r\n    path: string;\r\n    raw: Router;\r\n    version: number;\r\n  }> {\r\n    return {\r\n      path: `/v${this.version}`,\r\n      raw: this.raw,\r\n      version: this.version,\r\n    };\r\n  }\r\n}\r\n"],"mappings":"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","names":["src_exports","__export","ApiBuilder","EndpointBuilder","RouteBuilder","RouterBuilder","SchemaBuilder","StructureBuilder","VersionBuilder","src_default","__toCommonJS","import_dotenv","import_express","import_colors","import_colors","winston","debug","levelColor","level","colors","consoleFormat","timestamp","ms","message","stack","msg","ANSI_REGEX","logger","logger_default","validateEmail","str","validateUsername","valiedatePassword","validatePhoneNumber","validateIpv4Address","validateUrl","url","validateImage","image","notFound","req","res","next","logger_default","colors","errorHandler","err","error_middleware_default","import_mongoose","handledFunction","controller","req","res","next","session","error","logger_default","withErrorHandling","import_express","import_express_rate_limit","BaseAppBuilder","type","express","options","showInDocs","middleware","structures","StructureBuilder","name","type","fields","ApiBuilder","BaseAppBuilder","name","description","baseUrl","port","logo","version","versionValues","url","callback","req","res","error_middleware_default","structures","BaseValueBuilder","name","description","required","check","structure","ArrayValueBuilder","BaseValueBuilder","min","max","unique","contains","items","BooleanValueBuilder","BaseValueBuilder","ImageValueBuilder","BaseValueBuilder","IntegerValueBuilder","BaseValueBuilder","min","max","NumberValueBuilder","BaseValueBuilder","min","max","ObjectValueBuilder","BaseValueBuilder","properties","StringValueBuilder","BaseValueBuilder","min","max","options","test","SchemaBuilder","callback","value","ArrayValueBuilder","StringValueBuilder","NumberValueBuilder","IntegerValueBuilder","BooleanValueBuilder","ObjectValueBuilder","ImageValueBuilder","data","schema","properties","schemaFields","key","req","testVal","validateEmail","validateUsername","valiedatePassword","validatePhoneNumber","validateIpv4Address","validateUrl","check","result","validateImage","res","exportSchema","exportedValue","EndpointBuilder","disabled","name","description","path","method","notes","callback","schema","SchemaBuilder","responses","controller","withErrorHandling","req","res","next","error","logger_default","import_express","RouteBuilder","BaseAppBuilder","path","name","description","endpoint","doubleSlashRegex","url","endpointFile","value","RouterBuilder","BaseAppBuilder","path","name","route","import_express_rate_limit","VersionBuilder","BaseAppBuilder","version","options","showInDocs","rateLimit","router","routerValues","dotenv","src_default","express"]}