{"version":3,"sources":["../src/index.ts","../src/builders/Api.ts","../src/utils/ExpressCustomError.ts","../src/utils/logger.ts","../src/utils/validate.ts","../src/utils/middleware/error.middleware.ts","../src/utils/middleware/wrapper.middleware.ts","../src/bin/utils/logger.ts","../src/builders/Base/BaseApp.ts","../src/builders/Base/BaseValue.ts","../src/builders/Value/ArrayValue.ts","../src/builders/Value/BooleanValue.ts","../src/builders/Value/ImageValue.ts","../src/builders/Value/IntegerValue.ts","../src/builders/Value/NumberValue.ts","../src/builders/Value/ObjectValue.ts","../src/builders/Value/StringValue.ts","../src/builders/Schema.ts","../src/builders/Endpoint.ts","../src/builders/Group.ts","../src/builders/Route.ts","../src/builders/Structure.ts","../src/builders/Version.ts"],"sourcesContent":["import dotenv from 'dotenv';\nimport express from 'express';\n\ndotenv.config();\n\nexport { Config } from './typings/exports';\n\nexport * from './builders';\n\nexport default express;\n","import fs from 'fs';\nimport { Server } from 'http';\nimport path from 'path';\n\nimport { Config, ExportedApi } from '@typings/exports';\nimport { ExpressCustomError } from '@utils/index';\nimport { errorMiddleware } from '@utils/middleware';\nimport logger, { cli } from '../bin/utils/logger';\nimport BaseApp from './Base/BaseApp';\nimport Group from './Group';\nimport Schema from './Schema';\nimport Structure from './Structure';\nimport Version from './Version';\n\n/**\n * The ApiBuilder class, used to build an API.\n */\nexport default class Api extends BaseApp<'app'> {\n  private port: number;\n  private versions: Version[];\n  private groups: Group[];\n  private url: string;\n  private structures: Structure[];\n  private config?: Config;\n\n  /**\n   * Creates a new instance of the ApiBuilder class.\n   * @param options The ApiBuilder class options.\n   * @param options.url The Base URL of the API to as the root (reference) for the API.\n   * @param options.port The port the API will listen on when running the start() method.\n   * @param options.structures The structures used in the API endpoint schemas.\n   */\n  public constructor(options: {\n    url: string;\n    port: number;\n    structures?: Structure[];\n  }) {\n    super('app');\n\n    // The constructor schema.\n    const constructorSchema = new Schema()\n      .addString({\n        name: 'url',\n        required: true,\n        min: 1,\n        max: 100,\n      })\n      .addNumber({\n        name: 'port',\n        required: true,\n        min: 0,\n        max: 65536,\n      });\n\n    // Validate the constructor against the schema.\n    constructorSchema.validate(options).then((result) => {\n      if (typeof result === 'string')\n        throw new ExpressCustomError(`Api: ${result}`);\n    });\n\n    // Assign the options to the class.\n    this.versions = [];\n    this.groups = [];\n    this.url = options.url;\n    this.port = options.port;\n    this.structures = options.structures ?? [];\n  }\n\n  /**\n   * Adds a version to the API.\n   * @param version An instance of the Version class.\n   * @returns The current Api instance.\n   */\n  public addVersion(version: Version): this {\n    this.versions.push(version);\n    const versionValues = version.values();\n    this.raw.use(versionValues.path, versionValues.raw);\n    return this;\n  }\n\n  /**\n   * Adds a group directly to the API without a version.\n   * @param group An instance of the Group class.\n   * @returns The current Api instance.\n   */\n  public addGroup(group: Group): this {\n    this.groups.push(group);\n    const groupValues = group.values();\n    this.raw.use(groupValues.path, groupValues.raw);\n    return this;\n  }\n\n  /**\n   * Starts the API server.\n   * @param callback The callback function to run when the API is initialized. Can be async.\n   * @returns The HTTP server (http.Server).\n   */\n  public start(callback?: (() => void) | (() => Promise<void>)): Server {\n    // Validate the API and all of its children before starting the server.\n    this.validate();\n\n    // Set the root route to display basic API information.\n    this.raw.get('/', (__, res) =>\n      res.json({\n        message: `API Root`,\n        versions: this.versions.map((version) => {\n          const versionValues = version.values();\n          return {\n            version: `v${versionValues.version}`,\n            url: `${this.url}/v${versionValues.version}`,\n          };\n        }),\n      })\n    );\n\n    // Set the 404 and error handler middleware.\n    this.raw.use(errorMiddleware.notFound);\n    this.raw.use(errorMiddleware.errorHandler);\n\n    // Start the API server.\n    const server = this.raw.listen(this.port, callback);\n\n    return server;\n  }\n\n  /**\n   * Loads the configuration of the API from express-custom.json or package.json > \"express-custom\".\n   * @returns The configuration of the API.\n   */\n  private async loadConfig(): Promise<Readonly<Config>> {\n    let config: Partial<Config> = {};\n\n    // Get the path to the config file.\n    const configPath = path.join(process.cwd(), 'express-custom.json');\n\n    try {\n      // Read the config file.\n      const configFile = await fs.promises.readFile(configPath, 'utf-8');\n\n      try {\n        // Parse the JSON\n        config = JSON.parse(configFile.toString()) as Partial<Config>;\n      } catch (error) {\n        logger.error(\n          `${cli.error} Failed to parse config.json file (invalid JSON).`\n        );\n        throw new ExpressCustomError(error as string);\n      }\n    } catch (error) {\n      // Log an warning if the config file doesn't exist.\n      logger.warn(\n        `${cli.warning} No express-custom.json found, trying package.json`\n      );\n\n      try {\n        // Read the package.json file.\n        const packageJSON = await fs.promises.readFile(\n          path.join(process.cwd(), 'package.json')\n        );\n\n        try {\n          // Parse the JSON and get the \"express-custom\" block.\n          const configFile = (\n            JSON.parse(packageJSON.toString()) as {\n              'express-custom'?: Partial<Config>;\n            }\n          )['express-custom'];\n\n          // Check if the \"express-custom\" block exists and is an object.\n          if (typeof configFile !== 'object') {\n            logger.error(\n              `${cli.error} Failed to parse express-custom.json (invalid JSON or no \"express-custom\" block)`\n            );\n            throw new ExpressCustomError('Invalid JSON');\n          }\n\n          // Set the config to the \"express-custom\" block.\n          config = configFile;\n        } catch (error) {\n          // Throw an error if the \"express-custom\" block doesn't exist.\n          logger.error(\n            `${cli.error} Failed to parse express-custom.json (invalid JSON or no \"express-custom\" block)`\n          );\n          throw new ExpressCustomError(error as string);\n        }\n      } catch (error) {\n        // Throw an error if the package.json file doesn't exist.\n        logger.error(\n          `${cli.error} Failed to load express-custom config from package.json`\n        );\n        throw new ExpressCustomError(error as string);\n      }\n    }\n\n    // Regex to check if the file is a JavaScript or TypeScript file.\n    const fileExtRegex = /\\.ts$|\\.js$/;\n\n    // Create the config schema.\n    const configSchema = new Schema()\n      .addString({\n        name: 'file',\n        required: true,\n        max: 256,\n        checks: [\n          [\n            (value) => fileExtRegex.test(value),\n            'The file must be a JavaScript or TypeScript file (.js or .ts).',\n          ],\n        ],\n      })\n      .addString({\n        name: 'output',\n        max: 256,\n        defaultValue: 'docs',\n      })\n      .addString({\n        name: 'name',\n        defaultValue: 'My API',\n      })\n      .addString({\n        name: 'description',\n        defaultValue: 'Made with Express Custom',\n      })\n      .addString({\n        name: 'logo',\n        defaultValue: '/logo.png',\n      })\n      .addString({\n        name: 'customDir',\n        max: 256,\n      })\n      .addString({\n        name: 'theme',\n        defaultValue: 'default',\n      })\n      .addString({\n        name: 'codeTheme',\n        defaultValue: 'framer',\n      })\n      .addObject({\n        name: 'socials',\n        defaultValue: {},\n        properties: {\n          discord: {\n            type: 'string',\n          },\n          github: {\n            type: 'string',\n          },\n          instagram: {\n            type: 'string',\n          },\n          facebook: {\n            type: 'string',\n          },\n          linkedin: {\n            type: 'string',\n          },\n          youtube: {\n            type: 'string',\n          },\n          twitter: {\n            type: 'string',\n          },\n          email: {\n            type: 'string',\n          },\n        },\n      });\n\n    // Test the config against the schema.\n    const result = await configSchema.validate(config);\n\n    // If the result is a string, the config is invalid, log the error and exit the process.\n    if (typeof result === 'string') {\n      logger.error(\n        `${cli.error} Validation error while processing express-config.json`\n      );\n      logger.error(`${cli.error} Error: ${result}`);\n      process.exit(1);\n    }\n\n    // Get the validated config and assign it to the API instance.\n    const validatedConfig = config as Config;\n    this.config = validatedConfig;\n\n    return validatedConfig;\n  }\n\n  /**\n   * Gets the configuration of the API.\n   * @returns The configuration of the API.\n   */\n  public async getConfig(): Promise<Readonly<Config>> {\n    // If the config is already loaded, return it.\n    if (this.config) return this.config;\n    // Otherwise, load the config and return it.\n    const config = await this.loadConfig();\n    return config;\n  }\n\n  /**\n   * Validates the API instance and all of it's children instances.\n   * @throws An error if the API instance or any of it's children instances are invalid.\n   */\n  private validate(): void {\n    if (this.versions.length === 0 && this.groups.length === 0)\n      throw new ExpressCustomError('No versions or groups provided to the API');\n\n    this.versions.forEach((version) => version.validate());\n    this.groups.forEach((group) => group.validate());\n  }\n\n  /**\n   * Exports the Api class properties to a JSON object.\n   * @returns The exported API as a JSON object.\n   */\n  public async export(): Promise<Readonly<ExportedApi>> {\n    // Get the config.\n    const config = await this.getConfig();\n\n    return {\n      ...config,\n      url: this.url,\n      port: this.port,\n      structures: this.structures.map((structure) => structure.export()),\n      rateLimit: this.ratelimit,\n      versions: this.versions.map((version) => version.export()),\n      groups: this.groups.map((group) => group.export()),\n    };\n  }\n}\n","/**\n * ExpressCustomError class.\n */\nexport default class ExpressCustomError extends Error {\n  /**\n   * The constructor of the ExpressCustomError class.\n   * @param message The message of the error.\n   */\n  public constructor(message: string) {\n    super(message);\n    this.name = 'ExpressCustomError';\n    this.stack = '';\n  }\n}\n","import colors from 'colors';\nimport { TransformableInfo } from 'logform';\nimport * as winston from 'winston';\n\n/**\n * Returns a color based on the log level.\n * @param level The log level.\n * @returns The colored log level.\n */\nconst levelColor = (level: string): string => {\n  switch (level) {\n    case 'error': {\n      return colors.red(level.toUpperCase());\n    }\n    case 'warn': {\n      return colors.yellow(level.toUpperCase());\n    }\n    case 'info': {\n      return colors.green(level.toUpperCase());\n    }\n    case 'debug': {\n      return colors.blue(level.toUpperCase());\n    }\n    case 'trace': {\n      return colors.magenta(level.toUpperCase());\n    }\n    default: {\n      return colors.white(level.toUpperCase());\n    }\n  }\n};\n\n/**\n * The format for the console transport.\n */\nconst consoleFormat = winston.format.combine(\n  // winston.format.prettyPrint(),\n  winston.format.colorize(),\n  winston.format.ms(),\n  winston.format.errors({ stack: true }),\n  // winston.format.splat(),\n  // winston.format.json(),\n  winston.format.printf(({ ms, level, message, stack }: TransformableInfo) => {\n    let msg = message as string;\n\n    // Append the stack trace to the message if it is present\n    if (stack) msg += `\\n${stack as string}`;\n\n    /* eslint-disable no-control-regex */\n    const ANSI_REGEX = /\\u001b\\[[0-9]{1,2}m/gi;\n\n    return `[${colors.gray('express-custom')}] ${colors.cyan(\n      ms as string\n    )} [${levelColor(level.replace(ANSI_REGEX, ''))}]: ${msg}`;\n  })\n);\n\n/**\n * The logger instance - console transports only.\n */\nconst logger = winston.createLogger({\n  level: 'debug',\n  format: consoleFormat,\n  transports: [\n    // Console transport\n    new winston.transports.Console({\n      level: 'info',\n    }),\n  ],\n});\n\nexport default logger;\n","/**\n * Validate a cron expression.\n * @param expression The cron expression to validate.\n * @returns Whether the cron expression is valid.\n */\nexport const validateCronExpression = (expression: string): boolean => {\n  const cronExpressionRegex =\n    /^(\\*|[0-9]{1,2}|\\*\\/[0-9]{1,2}) (\\*|[0-9]{1,2}|\\*\\/[0-9]{1,2}) (\\*|[0-9]{1,2}|\\*\\/[0-9]{1,2}) (\\*|[0-9]{1,2}|\\*\\/[0-9]{1,2}) (\\*|[0-9]{1,2}|\\*\\/[0-9]{1,2})$/;\n  return cronExpressionRegex.test(expression);\n};\n\n/**\n * Convert a time to cron time.\n * @param time The time to convert to cron time.\n * @returns The converted time.\n */\nexport const timeToCronExpression = (time: string): string | null => {\n  const timeRegex = /^([01]\\d|2[0-3]):([0-5]\\d)$/; // Regular expression to validate HH:MM format\n\n  // Check if the time matches the HH:MM format\n  if (timeRegex.test(time)) {\n    const [hours, minutes] = time.split(':'); // Split the time into hours and minutes\n\n    if (!hours || !minutes) return null; // Return null if the time is invalid\n\n    // Format hours and minutes for cron time\n    const cronHours = hours === '00' ? '0' : hours.replace(/^0+/, ''); // Remove leading zeros, except for '00'\n    const cronMinutes = minutes.replace(/^0+/, ''); // Remove leading zeros\n\n    return `${cronMinutes} ${cronHours} * * *`; // Return the cron time format\n  }\n\n  return null; // Return null if the time is invalid\n};\n\n/**\n * Validate a time.\n * @param time The time to validate.\n * @returns Whether the time is valid.\n */\nexport const validateTime = (time: string): boolean => {\n  const timeRegex = /^(?:[01]\\d|2[0-3]):(?:00|30)$/; // Regular expression to validate HH:MM format\n  return timeRegex.test(time);\n};\n\n/**\n * Tests if a string is empty.\n * @param str The string to test.\n * @returns True if the string is empty, false otherwise.\n */\nexport const validateEmail = (str: string): boolean => {\n  // /^\\S+@\\S+\\.\\S+$/\n  // /\\S+@\\S+\\.\\S+/\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(str);\n};\n\n/**\n * Tests if a username is valid.\n * @param str The username to test.\n * @returns True if the username is valid, false otherwise.\n */\nexport const validateUsername = (str: string): boolean => {\n  const usernameRegex = /^[a-zA-Z0-9_]{3,16}$/;\n  return usernameRegex.test(str);\n};\n\n/**\n * Tests if a password is valid.\n * @param str The password to test.\n * @returns True if the password is valid, false otherwise.\n */\nexport const valiedatePassword = (str: string): boolean => {\n  const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$/;\n  return passwordRegex.test(str);\n};\n\n/**\n * Tests if a phone number is valid.\n * @param str The phone number to test.\n * @returns True if the phone number is valid, false otherwise.\n */\nexport const validatePhoneNumber = (str: string): boolean => {\n  const phoneNumberRegex = /^\\d{10}$/;\n  return phoneNumberRegex.test(str);\n};\n\n/**\n * Tests if a ipv4 address is valid.\n * @param str The IPv4 address to test.\n * @returns True if the IPv4 address is valid, false otherwise.\n */\nexport const validateIpv4Address = (str: string): boolean => {\n  // ^((25[0-5]|(2[0-4]|1\\d|[1-9]|)\\d)\\.?\\b){4}$ - https://stackoverflow.com/questions/5284147/validating-ipv4-addresses-with-regexp\n  const ipv4AddressRegex =\n    /^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\\.|$)){4}$/;\n  return ipv4AddressRegex.test(str);\n};\n\n/**\n * Tests if a color is valid.\n * @param color The color string to test.\n * @returns True if the color is valid, false otherwise.\n */\nexport const validateColor = (color: string): boolean => {\n  // Remove any whitespace from the input\n  const cleanedColor = color.replace(/\\s/g, '');\n\n  // Check if the input matches a valid hex color pattern\n  if (/^#?[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/.test(cleanedColor)) {\n    // If it does, add a '#' if it's missing and return the cleanedColor\n    return cleanedColor.startsWith('#');\n  }\n\n  return false;\n};\n\n/**\n * Tests if a url is valid.\n * @param url The url to test.\n * @returns True if the url is valid, false otherwise.\n */\nexport const validateUrl = (url: string): boolean => {\n  // Check if the url is valid\n  try {\n    const urlObject = new URL(url);\n    return urlObject.href === url; // Additional check to handle relative URLs\n  } catch (err) {\n    return false;\n  }\n};\n\n/**\n * Tests if a path is valid.\n * @param path The path to test.\n * @returns True if the path is valid, false otherwise.\n */\nexport const validatePath = (path: string): boolean => {\n  const pathRegex = /^\\/(?:[a-zA-Z0-9_]+\\/)?[a-zA-Z0-9_]*$/;\n  return pathRegex.test(path);\n};\n\n/**\n * Tests if an image is valid.\n * @param image The image to test.\n * @returns True if the image is valid, false otherwise.\n */\nexport const validateImage = (image: string): boolean => {\n  // Check if the image is valid\n  try {\n    const imageObject = new URL(image);\n    return imageObject.href === image; // Additional check to handle relative URLs\n  } catch (err) {\n    return false;\n  }\n};\n","import { Request, Response } from 'express';\n\nimport { logger } from '..';\n\n/**\n * Middleware to handle 404 errors.\n * @param __ The response object.\n * @param res The response object.\n */\nfunction notFound(__: Request, res: Response): void {\n  res.status(404).json({\n    status: 404,\n    message: 'The server cannot find the requested resource',\n  });\n}\n\ninterface HttpError extends Error {\n  status: number;\n  field?: string;\n}\n\n/**\n * Middleware to handle errors.\n * @param err The error object.\n * @param __ The request object.\n * @param res The response object.\n */\nfunction errorHandler(err: HttpError, __: Request, res: Response): void {\n  logger.error(err.message);\n\n  res.status(500).json({\n    status: 500,\n    message: 'Internal Server Error',\n    // stack: err.stack,\n    field: err.field,\n  });\n}\n\nexport default {\n  notFound,\n  errorHandler,\n};\n","import { NextFunction, Request, Response } from 'express';\n\nimport { logger } from '..';\n\ntype ControllerType = (\n  req: Request,\n  res: Response\n) => Promise<unknown> | unknown;\n\ntype ErrorHandlingReturnType = (\n  req: Request,\n  res: Response,\n  next: NextFunction\n) => void;\n\n/**\n * Wraps a handler function in error handling.\n * @param controller The handler function.\n * @returns The handler function wrapped in error handling.\n */\nexport function initController(\n  controller: ControllerType\n): ErrorHandlingReturnType {\n  return (req: Request, res: Response): void => {\n    (async () => {\n      try {\n        await controller(req, res);\n      } catch (error) {\n        logger.error(error);\n        res.status(500).json({ status: 500, message: 'Internal Server Error' });\n      }\n    })();\n  };\n}\n","import colors from 'colors';\nimport { TransformableInfo } from 'logform';\nimport * as winston from 'winston';\n\nexport const cli = {\n  info: colors.blue('CLI'),\n  success: colors.green('CLI'),\n  warning: colors.yellow('CLI'),\n  error: colors.red('CLI'),\n};\n\nexport const site = {\n  inf: colors.blue('SITE'),\n  suc: colors.green('SITE'),\n  err: colors.red('SITE'),\n};\n\n/**\n * The format for the console transport.\n */\nconst consoleFormat = winston.format.combine(\n  winston.format.colorize(),\n  winston.format.errors({ stack: true }),\n  winston.format.printf(({ message, stack }: TransformableInfo) => {\n    let msg = message as string;\n    // Append the stack trace to the message if it is present\n    if (stack) msg += `\\n${stack as string}`;\n    return msg;\n  })\n);\n\n/**\n * The logger instance - console transports only.\n */\nconst logger = winston.createLogger({\n  level: 'info',\n  format: consoleFormat,\n  transports: [\n    // Console transport\n    new winston.transports.Console({\n      level: 'info',\n    }),\n  ],\n});\n\nexport default logger;\n","import express, { Express, Router } from 'express';\nimport { Options, rateLimit } from 'express-rate-limit';\n\nimport { Middleware, RateLimit } from '@typings/core';\nimport ExpressCustomError from '@utils/ExpressCustomError';\n\n/**\n * The BaseApp class, used to build on top of an express app or router.\n */\nexport default class BaseApp<T extends 'router' | 'app'> {\n  public raw:\n    | (T extends 'app' ? Express : never)\n    | (T extends 'router' ? Router : never);\n  protected ratelimit?: Partial<RateLimit>;\n  protected middlewares: Middleware[];\n\n  /**\n   * Creates an instance of the BaseApp class.\n   * Pass 'app' to create an express app, and 'router' for an express router.\n   * @param type The type of the base app - 'app' or 'router'.\n   */\n  public constructor(type: T = 'router' as T) {\n    if (type === 'app') {\n      this.raw = express() as T extends 'app' ? Express : never;\n    } else {\n      this.raw = Router() as T extends 'router' ? Router : never;\n    }\n    this.middlewares = [];\n  }\n\n  /**\n   * Sets the rate limit for the base app or router.\n   * @param options The rate limit options provided by the express-rate-limit package.\n   * @returns The BaseApp class.\n   */\n  public setRateLimit(options: Partial<Options>): this {\n    if (this.ratelimit) throw new ExpressCustomError('Rate limit already set.');\n\n    this.ratelimit = {\n      statusCode: options.statusCode ?? 429,\n      ...(typeof options.windowMs === 'number'\n        ? { window: options.windowMs }\n        : {}),\n      ...(typeof options.max === 'number' ? { max: options.max } : {}),\n    };\n\n    // Use the express-rate-limit middleware.\n    this.raw.use(rateLimit(options));\n\n    return this;\n  }\n\n  /**\n   * Adds a middleware to the route. Add it before adding the route.\n   * @param middleware The middleware to add to the route.\n   * @returns The BaseApp class.\n   */\n  public addMiddleware(middleware: Middleware): this {\n    this.middlewares.push(middleware);\n    this.raw.use(middleware);\n    return this;\n  }\n}\n","import { BaseValueSchema, SchemaTypes, ValueCheck } from '@typings/schema';\n\nexport interface BaseValueOptions {\n  name: string;\n  description?: string;\n  required?: boolean;\n  checks?: ValueCheck[];\n  structure?: string;\n  defaultValue?: SchemaTypes;\n}\n\n/**\n * The BaseValue class. Used as a foundation for all value builders.\n */\nexport default class BaseValue implements BaseValueSchema {\n  public name: string;\n  public description?: string;\n  public required: boolean;\n  public checks: ValueCheck[];\n  public structure?: string;\n  public defaultValue?: SchemaTypes;\n\n  /**\n   * Creates a new instance of the BaseValue class.\n   * @param options The options for the BaseValue class.\n   * @param options.name The name of the value.\n   * @param options.description The description of the value.\n   * @param options.required Whether the value is required or not.\n   * @param options.checks The value checks. Functions that return a boolean based on the value.\n   */\n  public constructor(options: BaseValueOptions) {\n    this.name = options.name;\n    if (options.description) this.description = options.description;\n    this.required = options.required ?? false; // Default to false\n    this.checks = options.checks ?? [];\n    if (options.structure) this.structure = options.structure;\n    this.defaultValue = options.defaultValue;\n\n    this.validate();\n  }\n\n  /**\n   * Validates the BaseValue instances properties.\n   */\n  public validate(): void {\n    if (!this.name) throw new Error('Name is required');\n    if (typeof this.name !== 'string') throw new Error('Name must be a string');\n\n    if (this.description && typeof this.description !== 'string')\n      throw new Error('Description must be a string');\n\n    if (typeof this.required !== 'boolean')\n      throw new Error('Required must be a boolean');\n\n    if (!Array.isArray(this.checks)) throw new Error('Checks must be an array');\n\n    if (this.structure && typeof this.structure !== 'string')\n      throw new Error('Structure must be a string');\n  }\n}\n","import BaseValue, { BaseValueOptions } from '@builders/Base/BaseValue';\nimport { ArrayContains, IArrayValue, ValueSchema } from '@typings/schema';\n\nexport type ArrayValueOptions = BaseValueOptions & {\n  min?: number;\n  max?: number;\n  unique?: boolean;\n  contains?: ArrayContains;\n  items?: ValueSchema | ValueSchema[];\n};\n\n/**\n * The ArrayValue class, used to create array values.\n */\nexport default class ArrayValue\n  extends BaseValue\n  implements IArrayValue<ValueSchema>\n{\n  public type = 'array' as const;\n  public min?: number;\n  public max?: number;\n  public unique?: boolean;\n  public contains?: ArrayContains;\n  public items?: ValueSchema | ValueSchema[];\n\n  /**\n   * Creates an instance of the ArrayValue class.\n   * @param options The options for the ArrayValue class.\n   * @param options.min The minimum amount of items in the array.\n   * @param options.max The maximum amount of items in the array.\n   * @param options.unique Whether the array is unique.\n   * @param options.contains The type that the array needs to contain.\n   * @param options.items The items of the array to be matched.\n   */\n  public constructor({\n    min,\n    max,\n    unique,\n    contains,\n    items,\n    ...options\n  }: ArrayValueOptions) {\n    super(options);\n    if (min) this.min = min;\n    if (max) this.max = max;\n    this.unique = unique ?? false;\n    if (contains) this.contains = contains;\n    if (items) this.items = items;\n  }\n\n  /**\n   * Exports the ArrayValue class properties.\n   * @returns The ArrayValue class properties.\n   */\n  public export(): unknown {\n    return {\n      type: this.type,\n      name: this.name,\n      description: this.description,\n      required: this.required,\n      structure: this.structure,\n      max: this.max,\n      min: this.min,\n      unique: this.unique,\n    };\n  }\n}\n","import BaseValue, { BaseValueOptions } from '@builders/Base/BaseValue';\nimport { IBooleanValue } from '@typings/schema';\n\nexport type BooleanValueOptions = BaseValueOptions;\n\n/**\n * The BooleanValue class, used to create boolean values.\n */\nexport default class BooleanValue extends BaseValue implements IBooleanValue {\n  public type = 'boolean' as const;\n\n  /**\n   * Creates an instance of the BooleanValue class.\n   * @param options The options for the BooleanValue class.\n   */\n  public constructor(options: BooleanValueOptions) {\n    super(options);\n  }\n\n  /**\n   * Exports the BooleanValue class properties.\n   * @returns The BooleanValue class properties.\n   */\n  public export(): unknown {\n    return {\n      type: this.type,\n      name: this.name,\n      description: this.description,\n      required: this.required,\n      structure: this.structure,\n    };\n  }\n}\n","import BaseValue, { BaseValueOptions } from '@builders/Base/BaseValue';\nimport { IImageValue } from '@typings/schema';\n\nexport type ImageValueOptions = BaseValueOptions;\n\n/**\n * The ImageValue class, used to create image values.\n */\nexport default class ImageValue extends BaseValue implements IImageValue {\n  public type = 'image' as const;\n\n  /**\n   * Creates an instance of the ImageValue class.\n   * @param options The options for the ImageValue class.\n   */\n  public constructor(options: ImageValueOptions) {\n    super(options);\n  }\n\n  /**\n   * Exports the ImageValue class properties.\n   * @returns The ImageValue class properties.\n   */\n  public export(): unknown {\n    return {\n      type: this.type,\n      name: this.name,\n      description: this.description,\n      required: this.required,\n      structure: this.structure,\n    };\n  }\n}\n","import BaseValue, { BaseValueOptions } from '@builders/Base/BaseValue';\nimport { IIntegerValue } from '@typings/schema';\n\nexport type IntegerValueOptions = BaseValueOptions & {\n  min?: number;\n  max?: number;\n};\n\n/**\n * The InetgerValue class, used to create integer values.\n */\nexport default class IntegerValue extends BaseValue implements IIntegerValue {\n  public type = 'integer' as const;\n  public min?: number;\n  public max?: number;\n\n  /**\n   * Creates an instance of the IntegerValue class.\n   * @param options The options for the IntegerValue class.\n   */\n  public constructor(options: IntegerValueOptions) {\n    super(options);\n    if (options.min) this.min = options.min;\n    if (options.max) this.max = options.max;\n  }\n\n  /**\n   * Exports the IntegerValue class properties.\n   * @returns The IntegerValue class properties.\n   */\n  public export(): unknown {\n    return {\n      type: this.type,\n      name: this.name,\n      description: this.description,\n      required: this.required,\n      structure: this.structure,\n    };\n  }\n}\n","import BaseValue, { BaseValueOptions } from '@builders/Base/BaseValue';\nimport { INumberValue } from '@typings/schema';\n\nexport type NumberValueOptions = BaseValueOptions & {\n  min?: number;\n  max?: number;\n};\n\n/**\n * The NumberValue class, used to create number values.\n */\nexport default class NumberValue extends BaseValue implements INumberValue {\n  public type = 'number' as const;\n  public min?: number;\n  public max?: number;\n\n  /**\n   * Creates an instance of the NumberValue class.\n   * @param options The options for the NumberValue class.\n   */\n  public constructor(options: NumberValueOptions) {\n    super(options);\n    if (options.min) this.min = options.min;\n    if (options.max) this.max = options.max;\n  }\n\n  /**\n   * Exports the NumberValue class properties.\n   * @returns The NumberValue class properties.\n   */\n  public export(): unknown {\n    return {\n      type: this.type,\n      name: this.name,\n      description: this.description,\n      required: this.required,\n      structure: this.structure,\n    };\n  }\n}\n","import BaseValue, { BaseValueOptions } from '@builders/Base/BaseValue';\nimport { IObjectValue, ISchema } from '@typings/schema';\n\nexport type ObjectValueOptions = BaseValueOptions & {\n  properties: ISchema;\n};\n\n/**\n * The ObjectValue class, used to create object values.\n */\nexport default class ObjectValue<T>\n  extends BaseValue\n  implements IObjectValue<T>\n{\n  public type = 'object' as const;\n  public properties: ISchema;\n\n  /**\n   * Creates an instance of the ObjectValue class.\n   * @param options The options for the ObjectValue class.\n   */\n  public constructor(options: ObjectValueOptions) {\n    super(options);\n    this.properties = {};\n  }\n\n  /**\n   * Exports the ObjectValue class properties.\n   * @returns The ObjectValue class properties.\n   */\n  public export(): unknown {\n    return {\n      type: this.type,\n      name: this.name,\n      description: this.description,\n      required: this.required,\n      structure: this.structure,\n    };\n  }\n}\n","import BaseValue, { BaseValueOptions } from '@builders/Base/BaseValue';\nimport { IStringValue, StringTest } from '@typings/schema';\n\nexport type StringValueOptions = BaseValueOptions & {\n  min?: number;\n  max?: number;\n  options?: string[];\n  test?: StringTest;\n};\n\n/**\n * The StringValue class, used to create string values.\n */\nexport default class StringValue extends BaseValue implements IStringValue {\n  public type = 'string' as const;\n  public min?: number;\n  public max?: number;\n  public options?: string[];\n  public test?: StringTest;\n\n  /**\n   * Creates an instance of the StringValue class.\n   * @param options The options for the StringValue class.\n   */\n  public constructor(options: StringValueOptions) {\n    super(options);\n    if (options.min) this.min = options.min;\n    if (options.max) this.max = options.max;\n    if (options.options) this.options = options.options;\n    if (options.test) this.test = options.test;\n  }\n\n  /**\n   * Exports the StringValue class properties.\n   * @returns The StringValue class properties.\n   */\n  public export(): unknown {\n    return {\n      type: this.type,\n      name: this.name,\n      description: this.description,\n      required: this.required,\n      structure: this.structure,\n    };\n  }\n}\n","//  Disable the no-param-reassign rule as it is needed to assign default values to undefined parameters.\n/* eslint-disable no-param-reassign */\n\nimport { Response } from 'express';\n\nimport { ExportedSchema, ExportedValue } from '@typings/exports';\nimport { ISchema } from '@typings/schema';\nimport {\n  validateEmail,\n  validateImage,\n  validateIpv4Address,\n  validatePath,\n  validatePhoneNumber,\n  validateUrl,\n  validateUsername,\n  valiedatePassword,\n} from '@utils/validate';\nimport {\n  ArrayValue,\n  BooleanValue,\n  ImageValue,\n  IntegerValue,\n  NumberValue,\n  ObjectValue,\n  StringValue,\n} from './Value';\nimport { ArrayValueOptions } from './Value/ArrayValue';\nimport { BooleanValueOptions } from './Value/BooleanValue';\nimport { ImageValueOptions } from './Value/ImageValue';\nimport { IntegerValueOptions } from './Value/IntegerValue';\nimport { NumberValueOptions } from './Value/NumberValue';\nimport { ObjectValueOptions } from './Value/ObjectValue';\nimport { StringValueOptions } from './Value/StringValue';\n\ntype ValueBuilders =\n  | ArrayValue\n  | StringValue\n  | NumberValue\n  | IntegerValue\n  | BooleanValue\n  | ObjectValue<ValueBuilders>\n  | ImageValue;\n\nexport type BuildersSchema = Record<string, ValueBuilders>;\n\n/**\n * The Schema class, used to create schemas, which are used to validate data.\n */\nexport default class Schema {\n  public schema: BuildersSchema;\n\n  /**\n   * Creates a new instance of the Schema class.\n   */\n  public constructor() {\n    this.schema = {};\n  }\n\n  /**\n   * Adds a array value to the schema.\n   * @param options The options of the array value.\n   * @returns The current Schema instance.\n   */\n  public addArray(options: ArrayValueOptions): this {\n    const value = new ArrayValue(options);\n    this.schema[value.name] = value;\n    return this;\n  }\n\n  /**\n   * Adds a string value to the schema.\n   * @param options The options of the string value.\n   * @returns The current Schema instance.\n   */\n  public addString(options: StringValueOptions): this {\n    const value = new StringValue(options);\n    this.schema[value.name] = value;\n    return this;\n  }\n\n  /**\n   * Adds a number value to the schema.\n   * @param options The options of the number value.\n   * @returns The current Schema instance.\n   */\n  public addNumber(options: NumberValueOptions): this {\n    const value = new NumberValue(options);\n    this.schema[value.name] = value;\n    return this;\n  }\n\n  /**\n   * Adds a integer value to the schema.\n   * @param options The options of the integer value.\n   * @returns The current Schema instance.\n   */\n  public addInteger(options: IntegerValueOptions): this {\n    const value = new IntegerValue(options);\n    this.schema[value.name] = value;\n    return this;\n  }\n\n  /**\n   * Adds a boolean value to the schema.\n   * @param options The options of the boolean value.\n   * @returns The current Schema instance.\n   */\n  public addBoolean(options: BooleanValueOptions): this {\n    const value = new BooleanValue(options);\n    this.schema[value.name] = value;\n    return this;\n  }\n\n  /**\n   * Adds a object value to the schema.\n   * @param options The options of the object value.\n   * @returns The current Schema instance.\n   */\n  public addObject(options: ObjectValueOptions): this {\n    const value = new ObjectValue<ValueBuilders>(options);\n    this.schema[value.name] = value;\n    return this;\n  }\n\n  /**\n   * Adds a image value to the schema.\n   * @param options The options of the image value.\n   * @returns The current Schema instance.\n   */\n  public addImage(options: ImageValueOptions): this {\n    const value = new ImageValue(options);\n    this.schema[value.name] = value;\n    return this;\n  }\n\n  /**\n   * Validate an object against a schema.\n   * @param data The object data to validate.\n   * @param schema The schema to validate against.\n   * @param properties Whether to validate the schema properties or not.\n   * @returns A string if the validation fails, false otherwise.\n   */\n  private async validateBase<T = 'schema'>(\n    data: Record<string, unknown>,\n    schema:\n      | (T extends 'schema' ? BuildersSchema : never)\n      | (T extends 'properties' ? ISchema : never),\n    properties?: boolean\n  ): Promise<string | boolean> {\n    // Check if the data is an object\n    if (typeof data !== 'object') return 'The data provided must be an object.';\n\n    const schemaFields = properties\n      ? Object.entries(schema as ISchema)\n      : Object.entries(schema as BuildersSchema);\n\n    for (const [key, value] of schemaFields) {\n      // Check if all required fields have been provided.\n      // If the field has a default value as the required value is not provided, set the field to the default value.\n      if (value.required) {\n        if (!data[key] && value.defaultValue) {\n          data[key] = value.defaultValue;\n          break;\n        } else if (!data[key]) {\n          return `The field \"${key}\" has not been provided.`;\n        }\n      }\n\n      // For non required fields, if the value is not provided, set the field to the default value if it exists.\n      if (!data[key] && value.defaultValue) {\n        data[key] = value.defaultValue;\n        return false;\n      } else if (!data[key]) {\n        return false;\n      }\n    }\n\n    // Check if all provided fields are the correct type\n    for (const [key, value] of schemaFields) {\n      if (typeof data[key] !== value.type)\n        return `The field \"${key}\" must be of type ${value.type}.`;\n    }\n\n    // Check if all provided fields are valid\n    for (const [key, value] of schemaFields) {\n      // Number validation\n      if (value.type === 'number') {\n        // If both min and max are provided, check if the schema value is within the range\n        if (\n          value.min &&\n          value.max &&\n          typeof data[key] === 'number' &&\n          ((data[key] as number) < value.min ||\n            (data[key] as number) > value.max)\n        )\n          return `The field \"${key}\" must be between ${value.min} and ${value.max}.`;\n\n        // Check if the schema value is above the minimum required value\n        if (\n          value.min &&\n          typeof data[key] === 'number' &&\n          (data[key] as number) < value.min\n        )\n          return `The field \"${key}\" must be at least ${value.min}.`;\n\n        // Check if the schema value is below the maximum required value\n        if (\n          value.max &&\n          typeof data[key] === 'number' &&\n          (data[key] as number) > value.max\n        )\n          return `The field \"${key}\" must be less than ${value.max}.`;\n      }\n\n      // Integer validation\n      if (value.type === 'integer') {\n        // If both min and max are provided, check if the schema value is within the range\n        if (\n          value.min &&\n          value.max &&\n          typeof data[key] === 'number' &&\n          ((data[key] as number) < value.min ||\n            (data[key] as number) > value.max)\n        )\n          return `The field \"${key}\" must be between ${value.min} and ${value.max}.`;\n\n        // Check if the schema value is above the minimum required value\n        if (\n          value.min &&\n          typeof data[key] === 'number' &&\n          (data[key] as number) < value.min\n        )\n          return `The field \"${key}\" must be at least ${value.min}.`;\n\n        // Check if the schema value is below the maximum required value\n        if (\n          value.max &&\n          typeof data[key] === 'number' &&\n          (data[key] as number) > value.max\n        )\n          return `The field \"${key}\" must be less than ${value.max}.`;\n\n        // Check if the schema value is an integer\n        if (\n          typeof data[key] !== 'number' ||\n          !Number.isInteger(data[key] as number)\n        )\n          return `The field \"${key}\" must be an integer.`;\n      }\n\n      // String validation\n      if (value.type === 'string') {\n        const req = value;\n        const testVal = data[key] as string;\n\n        // Check if the schema value is included in the schema options\n        if (\n          value.options &&\n          value.options.length > 0 &&\n          !value.options.includes(data[key] as string)\n        )\n          return `The field \"${key}\" is not a valid option.`;\n\n        // If both min and max are provided, check if the schema value is within the range\n        if (\n          value.min &&\n          value.max &&\n          (testVal.length < value.min || testVal.length > value.max)\n        )\n          return `The field \"${key}\" must be between ${value.min} and ${value.max} characters.`;\n\n        // Check if the schema value has the minimum required length\n        if (value.min && testVal.length < value.min)\n          return `The field \"${key}\" must be at least ${value.min} characters.`;\n\n        // Check if the schema value has the maximum required length\n        if (value.max && testVal.length > value.max)\n          return `The field \"${key}\" must be less than ${value.max} characters.`;\n\n        // Test if email is valid\n        if (req.test === 'email' && !validateEmail(testVal))\n          return `The field \"${key}\" must be a valid email address.`;\n\n        // Test if username is valid\n        if (req.test === 'username' && !validateUsername(testVal))\n          return `The field \"${key}\" must be a valid username.`;\n\n        // Test if password is valid\n        if (req.test === 'passwordStrength' && !valiedatePassword(testVal))\n          return `The field \"${key}\" is too weak to be a valid password.`;\n\n        // Test if phone number is valid\n        if (req.test === 'phoneNumber' && !validatePhoneNumber(testVal))\n          return `The field \"${key}\" must be a valid phone number.`;\n\n        // Test if IPv4 address is valid\n        if (req.test === 'ipAddress' && !validateIpv4Address(testVal))\n          return `The field \"${key}\" must be a valid IPv4 address.`;\n\n        // Test if a url is valid\n        if (req.test === 'url' && !validateUrl(testVal))\n          return `The field \"${key}\" must be a valid IPv4 address.`;\n\n        // Test if a path is valid\n        if (req.test === 'path' && !validatePath(testVal))\n          return `The field \"${key}\" must be a valid path.`;\n\n        // Test if the schema value is a string\n        if (typeof data[key] !== 'string')\n          return `The field \"${key}\" must be a string.`;\n      }\n\n      // Check if the schema value passes all checks\n      if (value.checks)\n        for (const check of value.checks) {\n          const passedCheck = await check[0](key);\n          if (!passedCheck) return `${check[1]}.`;\n        }\n\n      // Boolean validation\n      if (value.type === 'boolean') {\n        // TODO: Check this works\n        // Check if the schema value is a boolean\n        if (typeof data[key] !== 'boolean')\n          return `The field \"${key}\" must be a boolean.`;\n      }\n\n      // Object validation\n      if (value.type === 'object') {\n        // TODO: Check this works\n        // Check if the schema value is an object\n        if (typeof data[key] !== 'object')\n          return `The field \"${key}\" must be an object.`;\n\n        // Check if the schema value has the correct properties\n        if (value.properties && Object.keys(value.properties).length > 0) {\n          const result = await this.validateBase<'properties'>(\n            data[key] as Record<string, unknown>,\n            value.properties as ISchema,\n            true\n          );\n          if (result) return result;\n        }\n      }\n\n      // Array validation\n      if (value.type === 'array') {\n        // TODO: Check this works\n        // Check if the schema value is an array\n        if (!Array.isArray(data[key]))\n          return `The field \"${key}\" must be an array.`;\n\n        // TODO: Check if the schema value has the correct items\n        /* if (value.items) {\n          for (const item of data[key] as unknown[]) {\n            if (typeof item !== value.items.type)\n              return `The field \"${key}\" must be an array of ${value.items.type}.`;\n            if (!value.items.options.includes(item))\n              return `The field \"${key}\" must be an array of valid options.`;\n          }\n        } */\n      }\n\n      // Image validation\n      if (value.type === 'image') {\n        // TODO: Check this works\n        // Check if the schema value is a string\n        if (typeof data[key] !== 'string')\n          return `The field \"${key}\" must be a string.`;\n\n        // Check if the schema value is a valid image\n        if (!validateImage(data[key] as string))\n          return `The field \"${key}\" must be a valid image.`;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Run the validation function, and if the response object is provided, send a response if the validation fails.\n   * @param data The object data to validate.\n   * @param options The options to use when validating.\n   * @param options.res The response object.\n   * @returns A JSON response meaning it's invalid, or null if it's valid.\n   */\n  public async validate(\n    data: Record<string, unknown>,\n    options?: { res?: Response }\n  ): Promise<Response | null | string> {\n    const result = await this.validateBase(data, this.schema);\n    if (typeof result !== 'string') return null;\n    if (options?.res)\n      return options.res.status(400).json({ status: 400, message: result });\n    return result;\n  }\n\n  /**\n   * Export the schema as a JSON object.\n   * @returns The exported schema as a JSON object.\n   */\n  public export(): ExportedSchema {\n    const exportSchema: Record<string, ExportedValue<ExportedSchema>> = {};\n\n    Object.entries(this.schema).forEach(([key, value]) => {\n      const exportedValue = value.export() as ExportedValue<ExportedSchema>;\n      exportSchema[key] = exportedValue;\n    });\n\n    return exportSchema;\n  }\n}\n","import { NextFunction, Request, Response } from 'express';\n\nimport {\n  ControllerType,\n  EndpointNote,\n  EndpointResponse,\n  PathString,\n  RateLimit,\n  RequestMethod,\n} from '@typings/core';\nimport { ExportedEndpoint } from '@typings/exports';\nimport { ExpressCustomError, logger } from '@utils/index';\nimport { initController } from '@utils/middleware/wrapper.middleware';\nimport Schema from './Schema';\n\n/**\n * The Endpoint class, used to build an endpoint.\n */\nexport default class Endpoint {\n  public disabled: boolean;\n  public name: string;\n  public description: string;\n  public path: PathString;\n  public method: RequestMethod;\n  public notes: EndpointNote[];\n  public paramSchema?: Schema;\n  public querySchema?: Schema;\n  public bodySchema?: Schema;\n  public responses: EndpointResponse[];\n  public controller: (req: Request, res: Response, next: NextFunction) => void;\n  public ratelimit?: Partial<RateLimit>;\n\n  /**\n   * Creates a new instance of the Endpoint class.\n   * @param options The options for the endpoint.\n   * @param options.name The name of the endpoint.\n   * @param options.description The description of the endpoint.\n   * @param options.path The path of the endpoint.\n   * @param options.method The method of the endpoint.\n   * @param options.controller The controller of the endpoint.\n   * @param options.notes The notes of the endpoint.\n   * @param options.responses An array of responses for the endpoint.\n   * @param options.disabled Whether the endpoint is temporarily disabled or not.\n   */\n  public constructor(options: {\n    name: string;\n    description: string;\n    path: PathString;\n    method: RequestMethod;\n    controller: ControllerType;\n    notes?: EndpointNote[];\n    responses?: EndpointResponse[];\n    disabled?: boolean;\n  }) {\n    // Create the schema for the constructor options.\n    const constructorSchema = new Schema()\n      .addBoolean({\n        name: 'disabled',\n        required: false,\n        defaultValue: false,\n      })\n      .addString({\n        name: 'name',\n        required: true,\n        min: 1,\n        max: 50,\n      })\n      .addString({\n        name: 'description',\n        required: true,\n        min: 1,\n        max: 1000,\n      })\n      .addString({\n        name: 'path',\n        required: true,\n        min: 1,\n        max: 100,\n        test: 'path',\n      })\n      .addString({\n        name: 'method',\n        required: true,\n        min: 1,\n        max: 100,\n        options: ['GET', 'POST', 'PATCH', 'PUT', 'DELETE', 'OPTIONS'],\n      });\n\n    // Test the options against the schema.\n    constructorSchema.validate(options).then((result) => {\n      if (typeof result === 'string')\n        throw new ExpressCustomError(\n          `Endpoint (${options.name || options.path}): ${result}`\n        );\n    });\n\n    // Assign the options to the endpoint.\n    this.disabled = options.disabled ?? false;\n    this.name = options.name;\n    this.description = options.description;\n    this.path = options.path;\n    this.method = options.method;\n    this.controller = initController(options.controller);\n    this.notes = options.notes ?? [];\n    this.responses = options.responses ?? [];\n  }\n\n  /**\n   * Sets the notes of the endpoint, for the documentation.\n   * @param notes An array of note objects.\n   * @returns The current Endpoint instance.\n   */\n  public setNotes(notes: EndpointNote[]): this {\n    this.notes = notes;\n    return this;\n  }\n\n  /**\n   * Sets the schema to validate the client's request parameters against.\n   * @param callback The callback function to build the schema.\n   * @returns The current Endpont instance.\n   */\n  public setParamSchema(callback: (schema: Schema) => void): this {\n    const schema = new Schema();\n    callback(schema);\n    this.paramSchema = schema;\n    return this;\n  }\n\n  /**\n   * Sets the schema to validate the client's request queries against.\n   * @param callback The callback function to build the schema.\n   * @returns The current Endpoint instance.\n   */\n  public setQuerySchema(callback: (schema: Schema) => void): this {\n    const schema = new Schema();\n    callback(schema);\n    this.querySchema = schema;\n    return this;\n  }\n\n  /**\n   * Sets the schema to validate the client's request body against.\n   * @param callback The callback function to build the schema.\n   * @returns The current Endpoint instance.\n   */\n  public setBodySchema(callback: (schema: Schema) => void): this {\n    const schema = new Schema();\n    callback(schema);\n    this.bodySchema = schema;\n    return this;\n  }\n\n  /**\n   * Sets the example responses of the endpoint, for the documentation.\n   * @param responses An array of response objects.\n   * @returns The current Endpoint instance.\n   */\n  public setResponses(responses: EndpointResponse[]): this {\n    this.responses = responses;\n    return this;\n  }\n\n  /**\n   * Sets the controler for the endpoint.\n   * @param controller The controlller function to run when the endpoint is called.\n   * @returns The current Endpoint instance.\n   */\n  public setController(\n    controller: (req: Request, res: Response) => Promise<unknown> | unknown\n  ): this {\n    this.controller = initController(controller);\n    return this;\n  }\n\n  /**\n   * Executes the endpoint controller function with error handling and validation.\n   * @param req The express request object.\n   * @param res The express response object.\n   * @param next The express next function.\n   */\n  public execute = (req: Request, res: Response, next: NextFunction): void => {\n    // Don't return, but run a self-executing async function to allow for async/await controller functions.\n    (async () => {\n      try {\n        // Validate the request against the schemas.\n        // If any of them fail, return because the response is handled by the validation function.\n        if (\n          this.paramSchema &&\n          (await this.paramSchema.validate(req.params, { res }))\n        )\n          return;\n        if (\n          this.querySchema &&\n          (await this.querySchema.validate(req.query, { res }))\n        )\n          return;\n        if (\n          this.bodySchema &&\n          (await this.bodySchema.validate(req.body as Record<string, unknown>, {\n            res,\n          }))\n        )\n          return;\n\n        // Run the controller function\n        this.controller(req, res, next);\n      } catch (error) {\n        logger.error(error);\n      }\n    })();\n  };\n\n  /**\n   * Exports the Endpoint instance properties to a JSON object.\n   * @returns The exported endpoint as a JSON object.\n   */\n  public export(): Readonly<ExportedEndpoint> {\n    return {\n      name: this.name,\n      description: this.description,\n      path: this.path === '/' ? '' : this.path,\n      method: this.method,\n      notes: this.notes,\n      params: this.paramSchema ? this.paramSchema.export() : {},\n      queries: this.querySchema ? this.querySchema.export() : {},\n      body: this.bodySchema ? this.bodySchema.export() : {},\n      responses: this.responses,\n    };\n  }\n}\n","import { Router } from 'express';\n\nimport { Middleware, PathString, RateLimit } from '@typings/core';\nimport { ExportedGroup } from '@typings/exports';\nimport { ExpressCustomError } from '@utils/index';\nimport BaseApp from './Base/BaseApp';\nimport Route from './Route';\nimport Schema from './Schema';\n\n/**\n * The Group class, used to create a group of routes.\n */\nexport default class Group extends BaseApp<'router'> {\n  private path: PathString;\n  private name: string;\n  private routes: Route[];\n\n  /**\n   * Creates a new instance of the Group class.\n   * @param options Options for the Group instance.\n   * @param options.path The path of the group.\n   * @param options.name The name of the group.\n   */\n  public constructor({ path, name }: { path: PathString; name: string }) {\n    super();\n\n    // Create the schema for the constructor options.\n    const constructorSchema = new Schema()\n      .addString({\n        name: 'path',\n        required: true,\n        min: 1,\n        max: 100,\n        test: 'path',\n      })\n      .addString({\n        name: 'name',\n        required: true,\n        min: 1,\n        max: 50,\n      });\n\n    // Test the the constructor against the schema.\n    constructorSchema.validate({ path, name }).then((result) => {\n      if (typeof result === 'string')\n        throw new ExpressCustomError(`Group (${name || path}): ${result}`);\n    });\n\n    // Assign the options to the instance.\n    this.path = path;\n    this.name = name;\n    this.routes = [];\n  }\n\n  /**\n   * Adds a route to the group.\n   * @param route An instance of the Route class.\n   * @returns The current Group instance.\n   */\n  public addRoute(route: Route): this {\n    this.routes.push(route);\n    this.raw.use(this.path, route.raw);\n    return this;\n  }\n\n  /**\n   * Returns the current group instance values.\n   * @returns The current group instance values.\n   */\n  public values(): Readonly<{\n    raw: Router;\n    ratelimit?: Partial<RateLimit> | undefined;\n    path: PathString;\n    defaultCategory: string;\n    routes: Route[];\n    middlewares: Middleware[];\n  }> {\n    return {\n      raw: this.raw,\n      ratelimit: this.ratelimit,\n      path: this.path,\n      defaultCategory: this.name,\n      routes: this.routes,\n      middlewares: this.middlewares,\n    };\n  }\n\n  /**\n   * Validates the group instance and all of its routes.\n   * @throws Throws an error if the group instance is invalid.\n   */\n  public validate(): void {\n    if (!this.routes.length) throw new ExpressCustomError('No routes provided');\n\n    this.routes.forEach((route) => route.validate());\n  }\n\n  /**\n   * Exports the routes and endpoints data.\n   * @returns The exported data.\n   */\n  public export(): Readonly<ExportedGroup> {\n    return {\n      name: this.name,\n      path: this.path,\n      routes: this.routes.map((route) => route.export()),\n    };\n  }\n}\n","import { PathString } from '@typings/core';\nimport { ExportedRoute } from '@typings/exports';\nimport { ExpressCustomError } from '@utils/index';\nimport BaseApp from './Base/BaseApp';\nimport Endpoint from './Endpoint';\nimport Schema from './Schema';\n\n/**\n * The Route class, used to create a route with endpoints.\n */\nexport default class Route extends BaseApp<'router'> {\n  private path: PathString;\n  private name: string;\n  private description: string;\n  private endpoints: Endpoint[] = [];\n\n  /**\n   * Creates a new instance of the Route class.\n   * @param options The options for the route.\n   * @param options.path The path of the route.\n   * @param options.name The name of the route.\n   * @param options.description The description of the route.\n   */\n  public constructor({\n    path,\n    name,\n    description,\n  }: {\n    path: PathString;\n    name: string;\n    description: string;\n  }) {\n    super();\n\n    // Create the schema for the constructor options.\n    const constructorSchema = new Schema()\n      .addString({\n        name: 'path',\n        required: true,\n        min: 1,\n        max: 100,\n        test: 'path',\n      })\n      .addString({\n        name: 'name',\n        required: true,\n        min: 1,\n        max: 50,\n      })\n      .addString({\n        name: 'description',\n        required: true,\n        min: 1,\n        max: 1000,\n      });\n\n    // Test the the constructor against the schema.\n    constructorSchema.validate({ name, description, path }).then((result) => {\n      if (typeof result === 'string')\n        throw new ExpressCustomError(`Route (${name || path}): ${result}`);\n    });\n\n    // Assign the options to the instance.\n    this.path = path;\n    this.name = name;\n    this.description = description;\n  }\n\n  /**\n   * Adds an endpoint to the route.\n   * @param endpoint An instance of the Endpoint class.\n   * @returns The current Route instance.\n   */\n  public addEndpoint(endpoint: Endpoint): this {\n    // Add the endpoint to the route.\n    this.endpoints.push(endpoint);\n\n    // Replace multiple slashes with a single slash.\n    const doubleSlashRegex = /\\/+/g;\n\n    // Create the url for the endpoint.\n    const url: string = `${this.path}${endpoint.path}`.replaceAll(\n      doubleSlashRegex,\n      '/'\n    );\n\n    // Add the endpoint to the router.\n    switch (endpoint.method) {\n      case 'GET':\n        this.raw.get(url, endpoint.execute);\n        break;\n      case 'POST':\n        this.raw.post(url, endpoint.execute);\n        break;\n      case 'PUT':\n        this.raw.put(url, endpoint.execute);\n        break;\n      case 'PATCH':\n        this.raw.patch(url, endpoint.execute);\n        break;\n      case 'DELETE':\n        this.raw.delete(url, endpoint.execute);\n        break;\n      case 'OPTIONS':\n        this.raw.options(url, endpoint.execute);\n        break;\n      default:\n        throw new ExpressCustomError(\n          `Invalid method ${String(endpoint.method)}`\n        );\n    }\n\n    return this;\n  }\n\n  /**\n   * Adds all endpoints from an endpoint file to the route.\n   * @param endpointFile The endpoint file to add endpoints from.\n   * @returns The current Route instance.\n   */\n  public addEndpointFile(endpointFile: Record<string, Endpoint>): this {\n    for (const value of Object.values(endpointFile)) {\n      this.addEndpoint(value);\n    }\n\n    return this;\n  }\n\n  /**\n   * Validates the current Route instance.\n   * @throws Throws an error if the route is invalid.\n   */\n  public validate(): void {\n    // If the route has no endpoints\n    if (this.endpoints.length === 0)\n      throw new ExpressCustomError(`Route ${this.name} has no endpoints`);\n  }\n\n  /**\n   * Exports the route to a JSON object.\n   * @returns The exported route as a JSON object.\n   */\n  public export(): Readonly<ExportedRoute> {\n    return {\n      name: this.name,\n      description: this.description,\n      path: this.path,\n      endpoints: this.endpoints.map((endpoint) => endpoint.export()),\n    };\n  }\n}\n","import { StructureField, StructureType } from '@typings/core';\nimport { ExportedStructure } from '@typings/exports';\n\n/**\n * The StructureBuilder class, used to build a example structures for object schemas and value options.\n */\nexport default class Structure {\n  private name: string;\n  private type: StructureType;\n  private fields: StructureField[];\n\n  /**\n   * Creates a new instance of the StructureBuilder class.\n   * @param options The options for the StructureBuilder class.\n   * @param options.name The name of the structure.\n   * @param options.type The type of the structure.\n   * @param options.fields The fields of the structure.\n   */\n  public constructor({\n    name,\n    type,\n    fields,\n  }: {\n    name: string;\n    type: StructureType;\n    fields: StructureField[];\n  }) {\n    // Assign the properties to the instance.\n    this.name = name;\n    this.type = type;\n    this.fields = fields;\n  }\n\n  /**\n   * Exports the structure as a JSON object.\n   * @returns The exported structure as a JSON object.\n   */\n  public export(): ExportedStructure {\n    return {\n      name: this.name,\n      type: this.type,\n      fields: this.fields,\n    };\n  }\n}\n","import { Router } from 'express';\nimport rateLimit, { Options } from 'express-rate-limit';\n\nimport { ExportedVersion } from '@typings/exports';\nimport ExpressCustomError from '@utils/ExpressCustomError';\nimport BaseApp from './Base/BaseApp';\nimport Group from './Group';\nimport Schema from './Schema';\n\n/**\n * The Version class, used to create a version of the API.\n */\nexport default class Version extends BaseApp<'app'> {\n  private version: number;\n  private groups: Group[];\n\n  /**\n   * Creates a new instance of the Version class.\n   * @param options The options for the Version class.\n   * @param options.version The version number of the API.\n   */\n  public constructor({ version }: { version: number }) {\n    super('app');\n\n    // The constructor schema.\n    const constructorSchema = new Schema().addNumber({\n      name: 'version',\n      required: true,\n      min: 1,\n      max: 10_000,\n    });\n\n    // Test the the constructor against the schema.\n    constructorSchema.validate({ version }).then((result) => {\n      if (typeof result === 'string') throw new ExpressCustomError(result);\n    });\n\n    // Assign the options to the instance.\n    this.groups = [];\n    this.version = version;\n  }\n\n  /**\n   * Sets the global rate limit for the version.\n   * @param options The options of the rate limit.\n   * @returns The current Version instance.\n   */\n  public override setRateLimit(options: Partial<Options>): this {\n    this.ratelimit = {\n      statusCode: options.statusCode ?? 429,\n      ...(typeof options.windowMs === 'number'\n        ? { window: options.windowMs }\n        : {}),\n      ...(typeof options.max === 'number' ? { max: options.max } : {}),\n    };\n\n    // Use the express-rate-limit middleware.\n    this.raw.use(`v${this.version}`, rateLimit(options));\n\n    return this;\n  }\n\n  /**\n   * Adds a group to the version.\n   * @param group An instance of the Group class.\n   * @returns The current Version instance.\n   */\n  public addGroup(group: Group): this {\n    this.groups.push(group);\n    const groupValues = group.values();\n    this.raw.use(groupValues.raw);\n    return this;\n  }\n\n  /**\n   * Exports the version as a JSON object.\n   * @returns The Version instance properties as a JSON object.\n   */\n  public export(): Readonly<ExportedVersion> {\n    return {\n      version: this.version,\n      rateLimit: this.ratelimit,\n      groups: this.groups.map((group) => group.export()),\n    };\n  }\n\n  /**\n   * Gets the version values.\n   * @returns The Version instance values.\n   */\n  public values(): Readonly<{\n    path: string;\n    raw: Router;\n    version: number;\n  }> {\n    return {\n      path: `/v${this.version}`,\n      raw: this.raw,\n      version: this.version,\n    };\n  }\n\n  /**\n   * Validates the current instance of the Version class.\n   * @throws Throws an error if the validation fails.\n   */\n  public validate(): void {\n    if (!this.groups.length) throw new ExpressCustomError('No groups provided');\n    this.groups.forEach((group) => group.validate());\n  }\n}\n"],"mappings":"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","names":["dotenv","express","fs","path","ExpressCustomError","message","__name","colors","winston","levelColor","__name","level","colors","consoleFormat","ms","message","stack","msg","ANSI_REGEX","logger","logger_default","validateEmail","__name","str","validateUsername","valiedatePassword","validatePhoneNumber","validateIpv4Address","validateUrl","__name","url","validatePath","path","validateImage","image","notFound","__","res","__name","errorHandler","err","logger_default","error_middleware_default","initController","controller","req","res","error","logger_default","__name","colors","winston","cli","site","consoleFormat","message","stack","msg","logger","logger_default","express","Router","rateLimit","BaseApp","type","express","Router","options","ExpressCustomError","rateLimit","middleware","__name","BaseValue","options","__name","ArrayValue","BaseValue","min","max","unique","contains","items","options","__name","BooleanValue","BaseValue","options","__name","ImageValue","BaseValue","options","__name","IntegerValue","BaseValue","options","__name","NumberValue","BaseValue","options","__name","ObjectValue","BaseValue","options","__name","StringValue","BaseValue","options","__name","Schema","options","value","ArrayValue","StringValue","NumberValue","IntegerValue","BooleanValue","ObjectValue","ImageValue","data","schema","properties","schemaFields","key","req","testVal","validateEmail","validateUsername","valiedatePassword","validatePhoneNumber","validateIpv4Address","validateUrl","validatePath","check","result","validateImage","exportSchema","exportedValue","__name","Api","BaseApp","options","Schema","result","ExpressCustomError","version","versionValues","group","groupValues","callback","__","res","error_middleware_default","config","configPath","path","configFile","fs","error","logger_default","cli","packageJSON","fileExtRegex","value","validatedConfig","structure","__name","Endpoint","options","Schema","result","ExpressCustomError","initController","notes","callback","schema","responses","controller","req","res","next","error","logger_default","__name","Group","BaseApp","path","name","Schema","result","ExpressCustomError","route","__name","Route","BaseApp","path","name","description","Schema","result","ExpressCustomError","endpoint","doubleSlashRegex","url","endpointFile","value","__name","Structure","name","type","fields","__name","rateLimit","Version","BaseApp","version","Schema","result","ExpressCustomError","options","rateLimit","group","groupValues","__name","dotenv","src_default","express"]}